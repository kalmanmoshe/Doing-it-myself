import { regExp } from "src/tikzjax/tikzjax";
import { brackets, mathJaxOperators, operatorsWithImplicitMultiplication, tikzComponents } from "./staticData";
/**
 * Escapes a string for safe use in a regular expression.
 * @param {string} str - The string to escape.
 * @returns {string} - The escaped string.
 */
export const escapeForRegex = (str) => {
    return str.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
};
/**
 * Retrieves all TikZ components as an array of regex-ready strings.
 * @returns {string[]} - Array of escaped TikZ component references.
 */
export function getAllTikzReferences() {
    return tikzComponents
        .flatMap((component) => component.references || [])
        .map(escapeForRegex);
}
/**
 * Searches TikZ components for a specific query.
 * @param {string} query - The query to search for.
 * @returns {object | undefined} - The matched TikZ component or undefined if not found.
 */
export function searchTikzComponents(query) {
    return tikzComponents.find((component) => Object.values(component).flat().some((value) => typeof value === 'string' && value === query));
}
/**
 * Searches symbols (math operators and brackets) for a specific query.
 * @param {string} query - The query to search for.
 * @returns {object | undefined} - The matched symbol or undefined if not found.
 */
export function searchSymbols(query) {
    return [...mathJaxOperators, ...brackets].find((symbol) => Object.values(symbol).some((value) => typeof value === 'string' && value.includes(query)));
}
/**
 * Searches math operators for a specific query.
 * @param {string} query - The query to search for.
 * @returns {object | undefined} - The matched operator or undefined if not found.
 */
export function searchMathJaxOperators(query) {
    return mathJaxOperators.find((operator) => Object.values(operator).flat().some((value) => typeof value === 'string' && value.includes(query)));
}
export function getAllMathJaxReferences() {
    return [...mathJaxOperators, ...brackets]
        .flatMap((component) => component.references || [])
        .map(escapeForRegex);
}
/**
 * Retrieves all MathJax operators and brackets as regex-ready strings.
 * @returns {string[]} - Array of escaped MathJax operator and bracket references.
 */
export function searchAllMathJaxOperatorsAndSymbols(query) {
    return [...mathJaxOperators, ...brackets]
        .find((operator) => Object.values(operator).flat().some((value) => typeof value === 'string' && value.includes(query)));
}
/**
 * Retrieves MathJax operators by priority level.
 * @param {number} priorityLevel - The priority level to filter by.
 * @param {boolean} toRegex - Whether to return the results as regex.
 * @returns {string[] | RegExp[]} - Array of operator names or regex patterns.
 */
export function getMathJaxOperatorsByPriority(priorityLevel, toRegex = false) {
    const prioritized = mathJaxOperators
        .filter((operator) => operator.priority === priorityLevel)
        .map((operator) => operator.name);
    return toRegex ? regExp(prioritized) : prioritized;
}
/**
 * Retrieves operators by associativity (side).
 * @param {string} side - The associativity to filter by (e.g., 'left', 'right', 'both').
 * @returns {string[]} - Array of operator names matching the specified side.
 */
export function getOperatorsByAssociativity(side) {
    return mathJaxOperators
        .filter((operator) => operator.associativity === side)
        .map((operator) => operator.name);
}
/**
 * Retrieves operators by bracket type.
 * @param {string} bracket - The bracket type to filter by (e.g., 'none', 'left', 'right').
 * @returns {string[]} - Array of operator names matching the specified bracket type.
 */
export function getOperatorsByBracket(bracket) {
    return mathJaxOperators
        .filter((operator) => operator.bracket === bracket)
        .map((operator) => operator.name);
}
/**
 * Checks if an operator has implicit multiplication.
 * @param {string} operatorName - The name of the operator to check.
 * @returns {boolean} - True if the operator has implicit multiplication, false otherwise.
 */
export function hasImplicitMultiplication(operatorName) {
    const operator = mathJaxOperators.find((op) => op.name === operatorName);
    return operator ? operatorsWithImplicitMultiplication.includes(operator.type) : false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YU1hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbHMvZGF0YU1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsbUNBQW1DLEVBQUUsY0FBYyxFQUFTLE1BQU0sY0FBYyxDQUFDO0FBRXRIOzs7O0dBSUc7QUFDSCxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBQyxHQUFXLEVBQVUsRUFBRTtJQUNsRCxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDekQsQ0FBQyxDQUFDO0FBRUY7OztHQUdHO0FBQ0gsTUFBTSxVQUFVLG9CQUFvQjtJQUNoQyxPQUFPLGNBQWM7U0FDaEIsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxTQUFTLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQztTQUNsRCxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDN0IsQ0FBQztBQUVEOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsb0JBQW9CLENBQUMsS0FBYTtJQUM5QyxPQUFPLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUNyQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQzNDLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLEtBQUssS0FBSyxDQUMvQyxDQUNKLENBQUM7QUFDTixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxhQUFhLENBQUMsS0FBYTtJQUN2QyxPQUFPLENBQUMsR0FBRyxnQkFBZ0IsRUFBRSxHQUFHLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FB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QUFJLEtBQUssWUFBWSxDQUFDLENBQUM7SUFDekUsT0FBTyxRQUFRLENBQUMsQ0FBQyxDQUFDLG1DQUFtQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUMxRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVnRXhwIH0gZnJvbSBcInNyYy90aWt6amF4L3Rpa3pqYXhcIjtcbmltcG9ydCB7IGJyYWNrZXRzLCBtYXRoSmF4T3BlcmF0b3JzLCBvcGVyYXRvcnNXaXRoSW1wbGljaXRNdWx0aXBsaWNhdGlvbiwgdGlrekNvbXBvbmVudHMsIHVuaXRzIH0gZnJvbSBcIi4vc3RhdGljRGF0YVwiO1xuXG4vKipcbiAqIEVzY2FwZXMgYSBzdHJpbmcgZm9yIHNhZmUgdXNlIGluIGEgcmVndWxhciBleHByZXNzaW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBlc2NhcGVGb3JSZWdleCA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIGFsbCBUaWtaIGNvbXBvbmVudHMgYXMgYW4gYXJyYXkgb2YgcmVnZXgtcmVhZHkgc3RyaW5ncy5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXX0gLSBBcnJheSBvZiBlc2NhcGVkIFRpa1ogY29tcG9uZW50IHJlZmVyZW5jZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxUaWt6UmVmZXJlbmNlcygpIHtcbiAgICByZXR1cm4gdGlrekNvbXBvbmVudHNcbiAgICAgICAgLmZsYXRNYXAoKGNvbXBvbmVudCkgPT4gY29tcG9uZW50LnJlZmVyZW5jZXMgfHwgW10pXG4gICAgICAgIC5tYXAoZXNjYXBlRm9yUmVnZXgpO1xufVxuXG4vKipcbiAqIFNlYXJjaGVzIFRpa1ogY29tcG9uZW50cyBmb3IgYSBzcGVjaWZpYyBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSAtIFRoZSBxdWVyeSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge29iamVjdCB8IHVuZGVmaW5lZH0gLSBUaGUgbWF0Y2hlZCBUaWtaIGNvbXBvbmVudCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoVGlrekNvbXBvbmVudHMocXVlcnk6IHN0cmluZykge1xuICAgIHJldHVybiB0aWt6Q29tcG9uZW50cy5maW5kKChjb21wb25lbnQpID0+XG4gICAgICAgIE9iamVjdC52YWx1ZXMoY29tcG9uZW50KS5mbGF0KCkuc29tZSgodmFsdWUpID0+XG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlID09PSBxdWVyeVxuICAgICAgICApXG4gICAgKTtcbn1cblxuLyoqXG4gKiBTZWFyY2hlcyBzeW1ib2xzIChtYXRoIG9wZXJhdG9ycyBhbmQgYnJhY2tldHMpIGZvciBhIHNwZWNpZmljIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7b2JqZWN0IHwgdW5kZWZpbmVkfSAtIFRoZSBtYXRjaGVkIHN5bWJvbCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoU3ltYm9scyhxdWVyeTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIFsuLi5tYXRoSmF4T3BlcmF0b3JzLCAuLi5icmFja2V0c10uZmluZCgoc3ltYm9sKSA9PlxuICAgICAgICBPYmplY3QudmFsdWVzKHN5bWJvbCkuc29tZSgodmFsdWUpID0+XG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmluY2x1ZGVzKHF1ZXJ5KVxuICAgICAgICApXG4gICAgKTtcbn1cblxuLyoqXG4gKiBTZWFyY2hlcyBtYXRoIG9wZXJhdG9ycyBmb3IgYSBzcGVjaWZpYyBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSAtIFRoZSBxdWVyeSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge29iamVjdCB8IHVuZGVmaW5lZH0gLSBUaGUgbWF0Y2hlZCBvcGVyYXRvciBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoTWF0aEpheE9wZXJhdG9ycyhxdWVyeTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG1hdGhKYXhPcGVyYXRvcnMuZmluZCgob3BlcmF0b3IpID0+XG4gICAgICAgIE9iamVjdC52YWx1ZXMob3BlcmF0b3IpLmZsYXQoKS5zb21lKCh2YWx1ZSkgPT5cbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuaW5jbHVkZXMocXVlcnkpXG4gICAgICAgIClcbiAgICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbE1hdGhKYXhSZWZlcmVuY2VzKCkge1xuICAgIHJldHVybiBbLi4ubWF0aEpheE9wZXJhdG9ycywgLi4uYnJhY2tldHNdXG4gICAgICAgIC5mbGF0TWFwKChjb21wb25lbnQpID0+IGNvbXBvbmVudC5yZWZlcmVuY2VzIHx8IFtdKVxuICAgICAgICAubWFwKGVzY2FwZUZvclJlZ2V4KTtcbn1cbi8qKlxuICogUmV0cmlldmVzIGFsbCBNYXRoSmF4IG9wZXJhdG9ycyBhbmQgYnJhY2tldHMgYXMgcmVnZXgtcmVhZHkgc3RyaW5ncy5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXX0gLSBBcnJheSBvZiBlc2NhcGVkIE1hdGhKYXggb3BlcmF0b3IgYW5kIGJyYWNrZXQgcmVmZXJlbmNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaEFsbE1hdGhKYXhPcGVyYXRvcnNBbmRTeW1ib2xzKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gWy4uLm1hdGhKYXhPcGVyYXRvcnMsIC4uLmJyYWNrZXRzXVxuICAgIC5maW5kKChvcGVyYXRvcikgPT5cbiAgICAgICAgT2JqZWN0LnZhbHVlcyhvcGVyYXRvcikuZmxhdCgpLnNvbWUoKHZhbHVlKSA9PlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5pbmNsdWRlcyhxdWVyeSlcbiAgICAgICAgKSlcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgTWF0aEpheCBvcGVyYXRvcnMgYnkgcHJpb3JpdHkgbGV2ZWwuXG4gKiBAcGFyYW0ge251bWJlcn0gcHJpb3JpdHlMZXZlbCAtIFRoZSBwcmlvcml0eSBsZXZlbCB0byBmaWx0ZXIgYnkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHRvUmVnZXggLSBXaGV0aGVyIHRvIHJldHVybiB0aGUgcmVzdWx0cyBhcyByZWdleC5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXSB8IFJlZ0V4cFtdfSAtIEFycmF5IG9mIG9wZXJhdG9yIG5hbWVzIG9yIHJlZ2V4IHBhdHRlcm5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF0aEpheE9wZXJhdG9yc0J5UHJpb3JpdHkocHJpb3JpdHlMZXZlbDogbnVtYmVyLCB0b1JlZ2V4ID0gZmFsc2UpIHtcbiAgICBjb25zdCBwcmlvcml0aXplZCA9IG1hdGhKYXhPcGVyYXRvcnNcbiAgICAgICAgLmZpbHRlcigob3BlcmF0b3IpID0+IG9wZXJhdG9yLnByaW9yaXR5ID09PSBwcmlvcml0eUxldmVsKVxuICAgICAgICAubWFwKChvcGVyYXRvcikgPT4gb3BlcmF0b3IubmFtZSk7XG4gICAgcmV0dXJuIHRvUmVnZXggPyByZWdFeHAocHJpb3JpdGl6ZWQpIDogcHJpb3JpdGl6ZWQ7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG9wZXJhdG9ycyBieSBhc3NvY2lhdGl2aXR5IChzaWRlKS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzaWRlIC0gVGhlIGFzc29jaWF0aXZpdHkgdG8gZmlsdGVyIGJ5IChlLmcuLCAnbGVmdCcsICdyaWdodCcsICdib3RoJykuXG4gKiBAcmV0dXJucyB7c3RyaW5nW119IC0gQXJyYXkgb2Ygb3BlcmF0b3IgbmFtZXMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBzaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0b3JzQnlBc3NvY2lhdGl2aXR5KHNpZGU6IHN0cmluZykge1xuICAgIHJldHVybiBtYXRoSmF4T3BlcmF0b3JzXG4gICAgICAgIC5maWx0ZXIoKG9wZXJhdG9yKSA9PiBvcGVyYXRvci5hc3NvY2lhdGl2aXR5ID09PSBzaWRlKVxuICAgICAgICAubWFwKChvcGVyYXRvcikgPT4gb3BlcmF0b3IubmFtZSk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG9wZXJhdG9ycyBieSBicmFja2V0IHR5cGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gYnJhY2tldCAtIFRoZSBicmFja2V0IHR5cGUgdG8gZmlsdGVyIGJ5IChlLmcuLCAnbm9uZScsICdsZWZ0JywgJ3JpZ2h0JykuXG4gKiBAcmV0dXJucyB7c3RyaW5nW119IC0gQXJyYXkgb2Ygb3BlcmF0b3IgbmFtZXMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBicmFja2V0IHR5cGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVyYXRvcnNCeUJyYWNrZXQoYnJhY2tldDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG1hdGhKYXhPcGVyYXRvcnNcbiAgICAgICAgLmZpbHRlcigob3BlcmF0b3IpID0+IG9wZXJhdG9yLmJyYWNrZXQgPT09IGJyYWNrZXQpXG4gICAgICAgIC5tYXAoKG9wZXJhdG9yKSA9PiBvcGVyYXRvci5uYW1lKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYW4gb3BlcmF0b3IgaGFzIGltcGxpY2l0IG11bHRpcGxpY2F0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdG9yTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBvcGVyYXRvciB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgdGhlIG9wZXJhdG9yIGhhcyBpbXBsaWNpdCBtdWx0aXBsaWNhdGlvbiwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzSW1wbGljaXRNdWx0aXBsaWNhdGlvbihvcGVyYXRvck5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IG9wZXJhdG9yID0gbWF0aEpheE9wZXJhdG9ycy5maW5kKChvcCkgPT4gb3AubmFtZSA9PT0gb3BlcmF0b3JOYW1lKTtcbiAgICByZXR1cm4gb3BlcmF0b3IgPyBvcGVyYXRvcnNXaXRoSW1wbGljaXRNdWx0aXBsaWNhdGlvbi5pbmNsdWRlcyhvcGVyYXRvci50eXBlKSA6IGZhbHNlO1xufVxuIl19