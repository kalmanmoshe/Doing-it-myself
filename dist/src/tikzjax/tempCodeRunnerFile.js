function dissectXYaxis(match) {
    let Xnode = "", Ynode = "";
    if (match[1] && match[2]) {
        Xnode = match[1].match(/['`"]([\w\d&$]+)['`"]/);
        Ynode = match[2].match(/['`"]([\w\d&$]+)['`"]/);
        Xnode = Xnode[0].substring(1, Xnode.length);
        Ynode = Ynode[0].substring(1, Ynode.length);
    }
    return {
        type: "xyaxis",
        Xformatting: match[1]?.replace(/(->|<-|['`"].*?['`"])/g, ""),
        Yformatting: match[2]?.replace(/(->|<-|['`"].*?['`"])/g, ""),
        xDirection: match[1] && /->/.test(match[1]) ? "left" : "right",
        yDirection: match[2] && /->/.test(match[2]) ? "down" : "up",
        Xnode: Xnode,
        Ynode: Ynode,
    };
}
function dissectDraw(match, tokens) {
    if (!match || !match[2]) {
        console.error("Invalid match input, aborting function.");
        return null;
    }
    const path = match[2];
    const coordinatesArray = [];
    //[a-zA-Z0-9.\\{}>\-\\<$\s]*
    const nodeRegex = /[\s]*node[\s]*\[?([\w\d,\s.=]*)\]?[\s]*{([a-zA-Z0-9.\\{}>\-\\<$\s]*)}[\s]*/;
    const formattingRegex = /[\s]*(cycle|--cycle|--\+\+|--\+|--|circle|rectangle)[\s]*/;
    const coordinateRegex = /\s*\(([a-zA-Z0-9,:.\w\d]+)\)[\s]*/;
    let i = 0, j = 0;
    while (i < path.length && j < 20) {
        j++;
        //console.log(coordinatesArray)
        const coordinateMatch = path.slice(i).match(coordinateRegex);
        if (coordinateMatch?.index === 0) {
            coordinatesArray.push({ type: "coordinate", value: coordinateMatch[1] });
            i += coordinateMatch[0].length;
        }
        const formattingMatch = path.slice(i).match(formattingRegex);
        if (formattingMatch?.index === 0) {
            i += formattingMatch[0].length;
            coordinatesArray.push({ type: "formatting", value: formattingMatch[0] });
        }
        const nodeMatch = path.slice(i).match(nodeRegex);
        if (nodeMatch?.index === 0) {
            coordinatesArray.push({ type: "node", formatting: nodeMatch[1] || "", value: nodeMatch[2] });
            i += nodeMatch[0].length;
        }
    }
    if (j === 20) {
        return match[0];
    }
    for (let i = 0; i < coordinatesArray.length; i++) {
        if (coordinatesArray[i].type === "coordinate") {
            let previousFormatting = undefined;
            if (i > 0 && coordinatesArray[i - 1].type === "formatting") {
                previousFormatting = coordinatesArray[i - 1].value;
            }
            else if (i > 1 && coordinatesArray[i - 1].type === "node" && coordinatesArray[i - 2].type === "formatting") {
                previousFormatting = coordinatesArray[i - 2].value;
            }
            coordinatesArray.splice(i, 1, parseCoordinates(coordinatesArray[i].value, tokens, previousFormatting, coordinatesArray));
        }
    }
    return {
        type: "draw",
        formatting: match[1],
        coordinates: coordinatesArray,
    };
}
function parseCoordinates(coordinate, tokens, formatting, coordinatesArray) {
    let xValue = null, yValue = null, name;
    const parseNumber = (value) => {
        const numberValue = parseFloat(value);
        return isNaN(numberValue) ? value : numberValue;
    };
    const findOriginalValue = (value) => {
        return tokens.find((token) => (token.type === "coordinate" || token.type === "node") && token.coordinateName === value);
    };
    const doubleMatchRegex = /\$\(([\w\d\s-,.:$+]+)\)\+\(([\w\d\s-,.:$+]+)\)\$/;
    const match = coordinate.match(doubleMatchRegex);
    if (match) {
        //onsole.log(parseCoordinates(match[1],tokens),parseCoordinates(match[2],tokens))
        const coordinate1 = parseCoordinates(match[1], tokens), coordinate2 = parseCoordinates(match[2], tokens);
        [xValue, yValue] = [coordinate1.X + coordinate2.X, coordinate1.Y + coordinate2.Y];
    }
    else if (coordinate.includes(",")) {
        [xValue, yValue] = coordinate.split(",").map(parseNumber);
    }
    else if (coordinate.includes(":")) {
        const [angle, length] = coordinate.split(":").map(parseFloat);
        if (!isNaN(angle) && !isNaN(length)) {
            const radians = degreesToRadians(angle);
            [xValue, yValue] = [length * Math.cos(radians), length * Math.sin(radians)].map(val => Math.abs(val) < 1e-10 ? 0 : val);
        }
        else {
            console.error("Invalid polar coordinates:", coordinate);
        }
    }
    else if (coordinate.includes("intersection")) {
        const originalCoords = coordinate
            .replace(/intersection\s?of\s?/g, "")
            .replace(/(\s*and\s?|--)/g, " ")
            .split(" ")
            .map(findOriginalValue);
        const slopes = [
            findSlope(originalCoords[0], originalCoords[1]),
            findSlope(originalCoords[2], originalCoords[3])
        ];
        ({ X: xValue, Y: yValue } = findIntersectionPoint(originalCoords[0], originalCoords[2], slopes[0], slopes[1]));
    }
    else {
        name = coordinate;
        const tokenMatch = findOriginalValue(coordinate);
        if (tokenMatch !== undefined) {
            [xValue, yValue] = [parseNumber(tokenMatch.X), parseNumber(tokenMatch.Y)];
        }
    }
    let coor = { X: 0, Y: 0 };
    if (formatting !== undefined && coordinatesArray.length > 0) {
        if (formatting === "--+") {
            coor = coordinatesArray.find((token) => token.type === "coordinate") || coor;
        }
        else if (formatting === "--++") {
            coor = coordinatesArray.findLast((token) => token.type === "coordinate") || coor;
        }
    }
    xValue += coor.X;
    yValue += coor.Y;
    return {
        type: "coordinate",
        X: xValue,
        Y: yValue,
        name: name,
        original: coordinate,
    };
}
function dissectCoordinates(match, tokens) {
    const [fullMatch, position, coordName, label, formatting] = match;
    const { X: xValue, Y: yValue } = parseCoordinates(position, tokens);
    return {
        X: xValue !== undefined ? xValue : null,
        Y: yValue !== undefined ? yValue : null,
        original: position,
        coordinateName: coordName || null,
        label: label || null,
        formatting: formatting.trim() || null,
    };
}
function findIntersectionPoint(coordinate1, coordinate2, slope1, slope2) {
    const xValue = ((slope2 * coordinate2.X) - (slope1 * coordinate1.X) + (coordinate1.Y - coordinate2.Y)) / (slope2 - slope1);
    return {
        X: xValue,
        Y: createLineFunction(coordinate1, slope1)(xValue)
    };
}
function createLineFunction(coordinate, slope) {
    return function (x) {
        return slope * (x - coordinate.X) + coordinate.Y;
    };
}
function findQuadrant(token, midPoint) {
    if (midPoint === null) {
        return null;
    }
    const xDirection = token.X > midPoint.X ? 1 : -1;
    const yDirection = token.Y > midPoint.Y ? 1 : -1;
    return yDirection === 1 ? (xDirection === 1 ? 1 : 2) : (xDirection === 1 ? 4 : 3);
}
function getExtremeXY(tokens) {
    let maxX = -Infinity;
    let maxY = -Infinity;
    let minX = Infinity;
    let minY = Infinity;
    tokens.forEach((token) => {
        if (token.type === "coordinate") {
            if (token.X > maxX)
                maxX = token.X;
            if (token.X < minX)
                minX = token.X;
            if (token.Y > maxY)
                maxY = token.Y;
            if (token.Y < minY)
                minY = token.Y;
        }
    });
    return {
        maxX, maxY, minX, minY,
    };
}
function reconstructDraw(token, tokens, midPoint) {
    let string = "", beforeToken, afterToken, slope;
    token.coordinates.forEach((coordinate, index) => {
        switch (coordinate.type) {
            case "coordinate":
                if (coordinate.name) {
                    string += `(${coordinate.name})`;
                }
                else {
                    string += `(${coordinate.X},${coordinate.Y})`;
                }
                break;
            case "node":
                afterToken = token.coordinates.slice(index).find((token) => token.type === "coordinate");
                if (afterToken === undefined && token.coordinates[token.coordinates.length - 1].value === "cycle") {
                    afterToken = token.coordinates[0];
                }
                beforeToken = token.coordinates.slice(0, index).reverse()
                    .find((token) => token.type === "coordinate");
                slope = findSlope(beforeToken, afterToken);
                string += `node [${sideNodeFormatting(coordinate.formatting, slope, beforeToken, afterToken, midPoint)}] {${coordinate.value}} `;
                break;
            case "formatting":
                string += coordinate.value;
                break;
        }
    });
    return string + ";";
}
function findSlope(coordinate1, coordinate2) {
    const deltaY = coordinate2.Y - coordinate1.Y;
    const deltaX = coordinate2.X - coordinate1.X;
    return deltaY / deltaX;
}
function sideNodeFormatting(formatting, slope, beforeToken, afterToken, midPoint) {
    if (formatting.match(/(above|below|left|right)/)) {
        return formatting;
    }
    formatting += formatting.length > 0 ? "," : "";
    const edge1 = findQuadrant(beforeToken, midPoint)?.toString() || "";
    const edge2 = findQuadrant(afterToken, midPoint)?.toString() || "";
    if (slope !== Infinity && slope !== -Infinity) {
        if (slope !== 0) {
            formatting += "sloped, ";
        }
        if (/(3|4)/.test(edge1) && /(3|4)/.test(edge2)) {
            formatting += "below ";
        }
        else if (/(1|2)/.test(edge1) && /(1|2)/.test(edge2)) {
            formatting += "above ";
        }
    }
    if (slope !== 0) {
        if (/(1|4)/.test(edge1) && /(1|4)/.test(edge2)) {
            formatting += "right";
        }
        else if (/(2|3)/.test(edge1) && /(2|3)/.test(edge2)) {
            formatting += "left";
        }
    }
    return formatting;
}
function generateFormatting(coordinate) {
    if (typeof coordinate.label !== "string") {
        return "";
    }
    const formatting = coordinate.formatting?.split(",") || [];
    if (formatting.some((value) => /(above|below|left|right)/.test(value))) {
        return coordinate.formatting;
    }
    if (formatting.length > 0 && !formatting[formatting.length - 1].endsWith(",")) {
        formatting.push(",");
    }
    switch (coordinate.quadrant) {
        case 1:
            formatting.push("above right, ");
            break;
        case 2:
            formatting.push("above left, ");
            break;
        case 3:
            formatting.push("below left, ");
            break;
        case 4:
            formatting.push("below right, ");
            break;
    }
    return formatting.join("");
}
function calculateCircle(point1, point2, point3) {
    const x1 = point1.X, y1 = point1.Y;
    const x2 = point2.X, y2 = point2.Y;
    const x3 = point3.X, y3 = point3.Y;
    // Calculate the determinants needed for solving the system
    const A = x1 * (y2 - y3) - y1 * (x2 - x3) + (x2 * y3 - y2 * x3);
    const B = (x1 ** 2 + y1 ** 2) * (y3 - y2) + (x2 ** 2 + y2 ** 2) * (y1 - y3) + (x3 ** 2 + y3 ** 2) * (y2 - y1);
    const C = (x1 ** 2 + y1 ** 2) * (x2 - x3) + (x2 ** 2 + y2 ** 2) * (x3 - x1) + (x3 ** 2 + y3 ** 2) * (x1 - x2);
    const D = (x1 ** 2 + y1 ** 2) * (x3 * y2 - x2 * y3) + (x2 ** 2 + y2 ** 2) * (x1 * y3 - x3 * y1) + (x3 ** 2 + y3 ** 2) * (x2 * y1 - x1 * y2);
    if (A === 0) {
        return null; // The points are collinear, no unique circle
    }
    // Calculate the center (h, k) of the circle
    const h = -B / (2 * A);
    const k = -C / (2 * A);
    // Calculate the radius of the circle
    const r = Math.sqrt((B ** 2 + C ** 2 - 4 * A * D) / (4 * A ** 2));
    return {
        center: { X: h, Y: k },
        radius: r,
        equation: `(x - ${h.toFixed(2)})^2 + (y - ${k.toFixed(2)})^2 = ${r.toFixed(2)}^2`
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVtcENvZGVSdW5uZXJGaWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Rpa3pqYXgvdGVtcENvZGVSdW5uZXJGaWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBLFNBQVMsYUFBYSxDQUFDLEtBQVU7SUFDakMsSUFBSSxLQUFLLEdBQUcsRUFBRSxFQUFFLEtBQUssR0FBRyxFQUFFLENBQUM7SUFFM0IsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ3RCLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDaEQsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUNoRCxLQUFLLEdBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQ3hDLEtBQUssR0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUE7S0FDM0M7SUFDRCxPQUFPO1FBQ0gsSUFBSSxFQUFFLFFBQVE7UUFDZCxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxFQUFFLENBQUM7UUFDNUQsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsd0JBQXdCLEVBQUUsRUFBRSxDQUFDO1FBQzVELFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPO1FBQzlELFVB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WUFDaEMsTUFBTTtRQUNOLEtBQUssQ0FBQztZQUNOLFVBQVUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDakMsTUFBTTtLQUNUO0lBQ0QsT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxNQUFXLEVBQUUsTUFBVyxFQUFFLE1BQVc7SUFDOUQsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNuQyxNQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ25DLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFFbkMsMkRBQTJEO0lBQzNELE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNoRSxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM5RyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM5RyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUU1SSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDVCxPQUFPLElBQUksQ0FBQyxDQUFDLDZDQUE2QztLQUM3RDtJQUVELDRDQUE0QztJQUM1QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUV2QixxQ0FBcUM7SUFDckMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxFLE9BQU87UUFDSCxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDdEIsTUFBTSxFQUFFLENBQUM7UUFDVCxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSTtLQUNwRixDQUFDO0FBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBkaXNzZWN0WFlheGlzKG1hdGNoOiBhbnkpIHtcclxubGV0IFhub2RlID0gXCJcIiwgWW5vZGUgPSBcIlwiO1xyXG5cclxuaWYgKG1hdGNoWzFdICYmIG1hdGNoWzJdKSB7XHJcbiAgICBYbm9kZSA9IG1hdGNoWzFdLm1hdGNoKC9bJ2BcIl0oW1xcd1xcZCYkXSspWydgXCJdLyk7XHJcbiAgICBZbm9kZSA9IG1hdGNoWzJdLm1hdGNoKC9bJ2BcIl0oW1xcd1xcZCYkXSspWydgXCJdLyk7XHJcbiAgICBYbm9kZT1Ybm9kZVswXS5zdWJzdHJpbmcoMSxYbm9kZS5sZW5ndGgpXHJcbiAgICBZbm9kZT1Zbm9kZVswXS5zdWJzdHJpbmcoMSxZbm9kZS5sZW5ndGgpXHJcbn1cclxucmV0dXJuIHtcclxuICAgIHR5cGU6IFwieHlheGlzXCIsXHJcbiAgICBYZm9ybWF0dGluZzogbWF0Y2hbMV0/LnJlcGxhY2UoLygtPnw8LXxbJ2BcIl0uKj9bJ2BcIl0pL2csIFwiXCIpLFxyXG4gICAgWWZvcm1hdHRpbmc6IG1hdGNoWzJdPy5yZXBsYWNlKC8oLT58PC18WydgXCJdLio/WydgXCJdKS9nLCBcIlwiKSxcclxuICAgIHhEaXJlY3Rpb246IG1hdGNoWzFdICYmIC8tPi8udGVzdChtYXRjaFsxXSkgPyBcImxlZnRcIiA6IFwicmlnaHRcIixcclxuICAgIHlEaXJlY3Rpb246IG1hdGNoWzJdICYmIC8tPi8udGVzdChtYXRjaFsyXSkgPyBcImRvd25cIiA6IFwidXBcIixcclxuICAgIFhub2RlOiBYbm9kZSxcclxuICAgIFlub2RlOiBZbm9kZSxcclxufTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGRpc3NlY3REcmF3KG1hdGNoOiBhbnksIHRva2VuczogYW55KSB7XHJcbmlmICghbWF0Y2ggfHwgIW1hdGNoWzJdKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBtYXRjaCBpbnB1dCwgYWJvcnRpbmcgZnVuY3Rpb24uXCIpO1xyXG4gICAgcmV0dXJuIG51bGw7IFxyXG59XHJcbmNvbnN0IHBhdGggPSBtYXRjaFsyXTsgXHJcbmNvbnN0IGNvb3JkaW5hdGVzQXJyYXkgPSBbXTtcclxuLy9bYS16QS1aMC05LlxcXFx7fT5cXC1cXFxcPCRcXHNdKlxyXG5jb25zdCBub2RlUmVnZXggPSAvW1xcc10qbm9kZVtcXHNdKlxcWz8oW1xcd1xcZCxcXHMuPV0qKVxcXT9bXFxzXSp7KFthLXpBLVowLTkuXFxcXHt9PlxcLVxcXFw8JFxcc10qKX1bXFxzXSovO1xyXG5jb25zdCBmb3JtYXR0aW5nUmVnZXggPSAvW1xcc10qKGN5Y2xlfC0tY3ljbGV8LS1cXCtcXCt8LS1cXCt8LS18Y2lyY2xlfHJlY3RhbmdsZSlbXFxzXSovO1xyXG5jb25zdCBjb29yZGluYXRlUmVnZXggPSAvXFxzKlxcKChbYS16QS1aMC05LDouXFx3XFxkXSspXFwpW1xcc10qLztcclxubGV0IGkgPSAwLGogPSAwO1xyXG5cclxud2hpbGUgKGkgPCBwYXRoLmxlbmd0aCAmJiBqIDwgMjApIHtcclxuICAgIGorKztcclxuICAgIC8vY29uc29sZS5sb2coY29vcmRpbmF0ZXNBcnJheSlcclxuICAgIGNvbnN0IGNvb3JkaW5hdGVNYXRjaD1wYXRoLnNsaWNlKGkpLm1hdGNoKGNvb3JkaW5hdGVSZWdleClcclxuICAgIGlmIChjb29yZGluYXRlTWF0Y2g/LmluZGV4PT09MCkge1xyXG4gICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKHsgdHlwZTogXCJjb29yZGluYXRlXCIsIHZhbHVlOiBjb29yZGluYXRlTWF0Y2hbMV0gfSk7XHJcbiAgICBpICs9IGNvb3JkaW5hdGVNYXRjaFswXS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybWF0dGluZ01hdGNoPXBhdGguc2xpY2UoaSkubWF0Y2goZm9ybWF0dGluZ1JlZ2V4KVxyXG4gICAgaWYoZm9ybWF0dGluZ01hdGNoPy5pbmRleD09PTApe1xyXG4gICAgaSArPSBmb3JtYXR0aW5nTWF0Y2hbMF0ubGVuZ3RoO1xyXG4gICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKHsgdHlwZTogXCJmb3JtYXR0aW5nXCIsIHZhbHVlOiBmb3JtYXR0aW5nTWF0Y2hbMF0gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm9kZU1hdGNoPXBhdGguc2xpY2UoaSkubWF0Y2gobm9kZVJlZ2V4KVxyXG4gICAgaWYobm9kZU1hdGNoPy5pbmRleD09PTApe1xyXG4gICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKHsgdHlwZTogXCJub2RlXCIsIGZvcm1hdHRpbmc6IG5vZGVNYXRjaFsxXSB8fCBcIlwiLCB2YWx1ZTogbm9kZU1hdGNoWzJdIH0pO1xyXG4gICAgaSArPSBub2RlTWF0Y2hbMF0ubGVuZ3RoOyBcclxuICAgIH1cclxufVxyXG5pZiAoaj09PTIwKXtcclxuICAgIHJldHVybiBtYXRjaFswXVxyXG59XHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGNvb3JkaW5hdGVzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmIChjb29yZGluYXRlc0FycmF5W2ldLnR5cGUgPT09IFwiY29vcmRpbmF0ZVwiKSB7XHJcbiAgICBsZXQgcHJldmlvdXNGb3JtYXR0aW5nID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGlmIChpID4gMCAmJiBjb29yZGluYXRlc0FycmF5W2kgLSAxXS50eXBlID09PSBcImZvcm1hdHRpbmdcIikge1xyXG4gICAgICAgIHByZXZpb3VzRm9ybWF0dGluZyA9IGNvb3JkaW5hdGVzQXJyYXlbaSAtIDFdLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaSA+IDEgJiYgY29vcmRpbmF0ZXNBcnJheVtpIC0gMV0udHlwZSA9PT0gXCJub2RlXCIgJiYgY29vcmRpbmF0ZXNBcnJheVtpIC0gMl0udHlwZSA9PT0gXCJmb3JtYXR0aW5nXCIpIHtcclxuICAgICAgICBwcmV2aW91c0Zvcm1hdHRpbmcgPSBjb29yZGluYXRlc0FycmF5W2kgLSAyXS52YWx1ZTtcclxuICAgIH1cclxuICAgIGNvb3JkaW5hdGVzQXJyYXkuc3BsaWNlKGksIDEsIHBhcnNlQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXNBcnJheVtpXS52YWx1ZSwgdG9rZW5zLCBwcmV2aW91c0Zvcm1hdHRpbmcsY29vcmRpbmF0ZXNBcnJheSkpO1xyXG4gICAgfVxyXG59XHJcbnJldHVybiB7XHJcbiAgICB0eXBlOiBcImRyYXdcIixcclxuICAgIGZvcm1hdHRpbmc6IG1hdGNoWzFdLFxyXG4gICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzQXJyYXksXHJcbn07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZTogYW55LCB0b2tlbnM6IGFueSwgZm9ybWF0dGluZz86IGFueSxjb29yZGluYXRlc0FycmF5PzogYW55KTogYW55IHtcclxubGV0IHhWYWx1ZSA9IG51bGwsIHlWYWx1ZSA9IG51bGwsIG5hbWU7XHJcblxyXG5jb25zdCBwYXJzZU51bWJlciA9ICh2YWx1ZTogYW55KSA9PiB7XHJcbiAgICBjb25zdCBudW1iZXJWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG4gICAgcmV0dXJuIGlzTmFOKG51bWJlclZhbHVlKSA/IHZhbHVlIDogbnVtYmVyVmFsdWU7XHJcbn07XHJcbmNvbnN0IGZpbmRPcmlnaW5hbFZhbHVlID0gKHZhbHVlOiBhbnkpID0+IHtcclxuICAgIHJldHVybiB0b2tlbnMuZmluZCgodG9rZW46IGFueSkgPT4gKHRva2VuLnR5cGUgPT09IFwiY29vcmRpbmF0ZVwifHx0b2tlbi50eXBlID09PSBcIm5vZGVcIikgJiYgdG9rZW4uY29vcmRpbmF0ZU5hbWUgPT09IHZhbHVlKTtcclxufTtcclxuXHJcbmNvbnN0IGRvdWJsZU1hdGNoUmVnZXg9L1xcJFxcKChbXFx3XFxkXFxzLSwuOiQrXSspXFwpXFwrXFwoKFtcXHdcXGRcXHMtLC46JCtdKylcXClcXCQvO1xyXG5jb25zdCBtYXRjaD1jb29yZGluYXRlLm1hdGNoKGRvdWJsZU1hdGNoUmVnZXgpXHJcbmlmIChtYXRjaCl7XHJcbiAgICAvL29uc29sZS5sb2cocGFyc2VDb29yZGluYXRlcyhtYXRjaFsxXSx0b2tlbnMpLHBhcnNlQ29vcmRpbmF0ZXMobWF0Y2hbMl0sdG9rZW5zKSlcclxuICAgIGNvbnN0IGNvb3JkaW5hdGUxPXBhcnNlQ29vcmRpbmF0ZXMobWF0Y2hbMV0sdG9rZW5zKSxjb29yZGluYXRlMj1wYXJzZUNvb3JkaW5hdGVzKG1hdGNoWzJdLHRva2Vucyk7XHJcbiAgICBbeFZhbHVlLCB5VmFsdWVdPVtjb29yZGluYXRlMS5YK2Nvb3JkaW5hdGUyLlgsY29vcmRpbmF0ZTEuWStjb29yZGluYXRlMi5ZXVxyXG59XHJcblxyXG5lbHNlIGlmIChjb29yZGluYXRlLmluY2x1ZGVzKFwiLFwiKSkge1xyXG4gICAgW3hWYWx1ZSwgeVZhbHVlXSA9IGNvb3JkaW5hdGUuc3BsaXQoXCIsXCIpLm1hcChwYXJzZU51bWJlcik7XHJcbn1cclxuXHJcbmVsc2UgaWYgKGNvb3JkaW5hdGUuaW5jbHVkZXMoXCI6XCIpKSB7XHJcbiAgICBjb25zdCBbYW5nbGUsIGxlbmd0aF0gPSBjb29yZGluYXRlLnNwbGl0KFwiOlwiKS5tYXAocGFyc2VGbG9hdCk7XHJcbiAgICBpZiAoIWlzTmFOKGFuZ2xlKSAmJiAhaXNOYU4obGVuZ3RoKSkge1xyXG4gICAgY29uc3QgcmFkaWFucyA9IGRlZ3JlZXNUb1JhZGlhbnMoYW5nbGUpO1xyXG4gICAgW3hWYWx1ZSwgeVZhbHVlXSA9IFtsZW5ndGggKiBNYXRoLmNvcyhyYWRpYW5zKSwgbGVuZ3RoICogTWF0aC5zaW4ocmFkaWFucyldLm1hcCh2YWwgPT4gTWF0aC5hYnModmFsKSA8IDFlLTEwID8gMCA6IHZhbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgcG9sYXIgY29vcmRpbmF0ZXM6XCIsIGNvb3JkaW5hdGUpO1xyXG4gICAgfVxyXG59XHJcbmVsc2UgaWYgKGNvb3JkaW5hdGUuaW5jbHVkZXMoXCJpbnRlcnNlY3Rpb25cIikpIHtcclxuICAgIGNvbnN0IG9yaWdpbmFsQ29vcmRzID0gY29vcmRpbmF0ZVxyXG4gICAgLnJlcGxhY2UoL2ludGVyc2VjdGlvblxccz9vZlxccz8vZywgXCJcIilcclxuICAgIC5yZXBsYWNlKC8oXFxzKmFuZFxccz98LS0pL2csIFwiIFwiKVxyXG4gICAgLnNwbGl0KFwiIFwiKVxyXG4gICAgLm1hcChmaW5kT3JpZ2luYWxWYWx1ZSk7XHJcbiAgICBjb25zdCBzbG9wZXMgPSBbXHJcbiAgICBmaW5kU2xvcGUob3JpZ2luYWxDb29yZHNbMF0sIG9yaWdpbmFsQ29vcmRzWzFdKSxcclxuICAgIGZpbmRTbG9wZShvcmlnaW5hbENvb3Jkc1syXSwgb3JpZ2luYWxDb29yZHNbM10pXHJcbiAgICBdO1xyXG4gICAgKHsgWDogeFZhbHVlLCBZOiB5VmFsdWUgfSA9IGZpbmRJbnRlcnNlY3Rpb25Qb2ludChvcmlnaW5hbENvb3Jkc1swXSwgb3JpZ2luYWxDb29yZHNbMl0sIHNsb3Blc1swXSwgc2xvcGVzWzFdKSk7XHJcbn0gIFxyXG5lbHNlIHtcclxuICAgIG5hbWUgPSBjb29yZGluYXRlO1xyXG4gICAgY29uc3QgdG9rZW5NYXRjaCA9IGZpbmRPcmlnaW5hbFZhbHVlKGNvb3JkaW5hdGUpO1xyXG4gICAgaWYgKHRva2VuTWF0Y2ggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgW3hWYWx1ZSwgeVZhbHVlXSA9IFtwYXJzZU51bWJlcih0b2tlbk1hdGNoLlgpLCBwYXJzZU51bWJlcih0b2tlbk1hdGNoLlkpXTtcclxuICAgIH1cclxufVxyXG5sZXQgY29vcj17WDowLFk6MH1cclxuaWYgKGZvcm1hdHRpbmchPT11bmRlZmluZWQmJmNvb3JkaW5hdGVzQXJyYXkubGVuZ3RoPjApe1xyXG4gICAgaWYoZm9ybWF0dGluZz09PVwiLS0rXCIpe1xyXG4gICAgY29vcj1jb29yZGluYXRlc0FycmF5LmZpbmQoKHRva2VuOiBhbnkpPT4gdG9rZW4udHlwZT09PVwiY29vcmRpbmF0ZVwiKXx8Y29vclxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9ybWF0dGluZyA9PT0gXCItLSsrXCIpIHtcclxuICAgIGNvb3IgPSBjb29yZGluYXRlc0FycmF5LmZpbmRMYXN0KCh0b2tlbjogYW55KSA9PiB0b2tlbi50eXBlID09PSBcImNvb3JkaW5hdGVcIikgfHwgY29vcjtcclxuICAgIH1cclxufVxyXG54VmFsdWUrPWNvb3IuWDt5VmFsdWUrPWNvb3IuWTtcclxucmV0dXJuIHtcclxuICAgIHR5cGU6IFwiY29vcmRpbmF0ZVwiLFxyXG4gICAgWDogeFZhbHVlLFxyXG4gICAgWTogeVZhbHVlLFxyXG4gICAgbmFtZTogbmFtZSxcclxuICAgIG9yaWdpbmFsOiBjb29yZGluYXRlLFxyXG59O1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNzZWN0Q29vcmRpbmF0ZXMobWF0Y2g6IGFueSx0b2tlbnM6IGFueSl7XHJcbmNvbnN0IFtmdWxsTWF0Y2gsIHBvc2l0aW9uLCBjb29yZE5hbWUsIGxhYmVsLCBmb3JtYXR0aW5nXSA9IG1hdGNoO1xyXG5jb25zdCB7IFg6IHhWYWx1ZSwgWTogeVZhbHVlIH0gPSBwYXJzZUNvb3JkaW5hdGVzKHBvc2l0aW9uLCB0b2tlbnMpO1xyXG5yZXR1cm4ge1xyXG4gICAgWDogeFZhbHVlICE9PSB1bmRlZmluZWQgPyB4VmFsdWUgOiBudWxsLFxyXG4gICAgWTogeVZhbHVlICE9PSB1bmRlZmluZWQgPyB5VmFsdWUgOiBudWxsLFxyXG4gICAgb3JpZ2luYWw6IHBvc2l0aW9uLFxyXG4gICAgY29vcmRpbmF0ZU5hbWU6IGNvb3JkTmFtZSB8fCBudWxsLFxyXG4gICAgbGFiZWw6IGxhYmVsIHx8IG51bGwsXHJcbiAgICBmb3JtYXR0aW5nOiBmb3JtYXR0aW5nLnRyaW0oKSB8fCBudWxsLFxyXG59O1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kSW50ZXJzZWN0aW9uUG9pbnQoY29vcmRpbmF0ZTE6IGFueSwgY29vcmRpbmF0ZTI6IGFueSwgc2xvcGUxOiBudW1iZXIsIHNsb3BlMjogbnVtYmVyKSB7XHJcbiAgICBjb25zdCB4VmFsdWUgPSAoKHNsb3BlMiAqIGNvb3JkaW5hdGUyLlgpIC0gKHNsb3BlMSAqIGNvb3JkaW5hdGUxLlgpICsgKGNvb3JkaW5hdGUxLlkgLSBjb29yZGluYXRlMi5ZKSkgLyAoc2xvcGUyIC0gc2xvcGUxKTtcclxuICAgIHJldHVybiB7XHJcbiAgICBYOiB4VmFsdWUsIFxyXG4gICAgWTogY3JlYXRlTGluZUZ1bmN0aW9uKGNvb3JkaW5hdGUxLCBzbG9wZTEpKHhWYWx1ZSlcclxufTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGluZUZ1bmN0aW9uKGNvb3JkaW5hdGU6IGFueSwgc2xvcGU6IG51bWJlcikge1xyXG5yZXR1cm4gZnVuY3Rpb24oeDogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gc2xvcGUgKiAoeCAtIGNvb3JkaW5hdGUuWCkgKyBjb29yZGluYXRlLlk7XHJcbn07XHJcbn1cclxuXHJcbmludGVyZmFjZSB0b2tlbiAge1xyXG5YOiBudW1iZXI7XHJcblk6IG51bWJlcjtcclxufVxyXG5mdW5jdGlvbiBmaW5kUXVhZHJhbnQodG9rZW46IHRva2VuLG1pZFBvaW50OiBhbnkpe1xyXG5pZiAobWlkUG9pbnQ9PT1udWxsKXtyZXR1cm4gbnVsbH1cclxuY29uc3QgeERpcmVjdGlvbiA9IHRva2VuLlggPiBtaWRQb2ludC5YID8gMSA6IC0xO1xyXG5jb25zdCB5RGlyZWN0aW9uID0gdG9rZW4uWSA+IG1pZFBvaW50LlkgPyAxIDogLTE7XHJcbnJldHVybiB5RGlyZWN0aW9uID09PSAxID8gKHhEaXJlY3Rpb24gPT09IDEgPyAxIDogMikgOiAoeERpcmVjdGlvbiA9PT0gMSA/IDQgOiAzKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0RXh0cmVtZVhZKHRva2VuczogYW55KSB7XHJcbmxldCBtYXhYID0gLUluZmluaXR5O1xyXG5sZXQgbWF4WSA9IC1JbmZpbml0eTtcclxubGV0IG1pblggPSBJbmZpbml0eTtcclxubGV0IG1pblkgPSBJbmZpbml0eTtcclxuXHJcbnRva2Vucy5mb3JFYWNoKCh0b2tlbjogYW55KSA9PiB7XHJcbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJjb29yZGluYXRlXCIpIHtcclxuICAgIGlmICh0b2tlbi5YID4gbWF4WCkgbWF4WCA9IHRva2VuLlg7XHJcbiAgICBpZiAodG9rZW4uWCA8IG1pblgpIG1pblggPSB0b2tlbi5YO1xyXG5cclxuICAgIGlmICh0b2tlbi5ZID4gbWF4WSkgbWF4WSA9IHRva2VuLlk7XHJcbiAgICBpZiAodG9rZW4uWSA8IG1pblkpIG1pblkgPSB0b2tlbi5ZO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbnJldHVybiB7XHJcbiAgICBtYXhYLG1heFksbWluWCxtaW5ZLFxyXG59O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVjb25zdHJ1Y3REcmF3KHRva2VuOiBhbnksdG9rZW5zOiBhbnksbWlkUG9pbnQ6IGFueSl7XHJcbmxldCBzdHJpbmc9XCJcIixiZWZvcmVUb2tlbixhZnRlclRva2VuLHNsb3BlO1xyXG50b2tlbi5jb29yZGluYXRlcy5mb3JFYWNoKChjb29yZGluYXRlOiBhbnksaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgc3dpdGNoKGNvb3JkaW5hdGUudHlwZSl7XHJcbiAgICBjYXNlIFwiY29vcmRpbmF0ZVwiOlxyXG4gICAgICAgIGlmKGNvb3JkaW5hdGUubmFtZSl7c3RyaW5nKz1gKCR7Y29vcmRpbmF0ZS5uYW1lfSlgO31cclxuICAgICAgICBlbHNle3N0cmluZys9YCgke2Nvb3JkaW5hdGUuWH0sJHtjb29yZGluYXRlLll9KWA7fVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIm5vZGVcIjpcclxuICAgICAgICBhZnRlclRva2VuPXRva2VuLmNvb3JkaW5hdGVzLnNsaWNlKGluZGV4KS5maW5kKCh0b2tlbjogYW55KT0+IHRva2VuLnR5cGU9PT1cImNvb3JkaW5hdGVcIik7XHJcbiAgICAgICAgaWYgKGFmdGVyVG9rZW49PT11bmRlZmluZWQmJnRva2VuLmNvb3JkaW5hdGVzW3Rva2VuLmNvb3JkaW5hdGVzLmxlbmd0aC0xXS52YWx1ZT09PVwiY3ljbGVcIil7XHJcbiAgICAgICAgYWZ0ZXJUb2tlbj10b2tlbi5jb29yZGluYXRlc1swXVxyXG4gICAgICAgIH1cclxuICAgICAgICBiZWZvcmVUb2tlbj10b2tlbi5jb29yZGluYXRlcy5zbGljZSgwLCBpbmRleCkucmV2ZXJzZSgpXHJcbiAgICAgICAgLmZpbmQoKHRva2VuOiBhbnkpID0+IHRva2VuLnR5cGUgPT09IFwiY29vcmRpbmF0ZVwiKTtcclxuICAgICAgICBzbG9wZT1maW5kU2xvcGUoYmVmb3JlVG9rZW4sYWZ0ZXJUb2tlbilcclxuICAgICAgICBzdHJpbmcrPWBub2RlIFske3NpZGVOb2RlRm9ybWF0dGluZyhjb29yZGluYXRlLmZvcm1hdHRpbmcsc2xvcGUsYmVmb3JlVG9rZW4sYWZ0ZXJUb2tlbixtaWRQb2ludCl9XSB7JHtjb29yZGluYXRlLnZhbHVlfX0gYFxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcImZvcm1hdHRpbmdcIjpcclxuICAgICAgICBzdHJpbmcrPWNvb3JkaW5hdGUudmFsdWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn0pO1xyXG5yZXR1cm4gc3RyaW5nK1wiO1wiXHJcbn1cclxuZnVuY3Rpb24gZmluZFNsb3BlKGNvb3JkaW5hdGUxOiBhbnksIGNvb3JkaW5hdGUyOiBhbnkpIHtcclxuY29uc3QgZGVsdGFZID0gY29vcmRpbmF0ZTIuWSAtIGNvb3JkaW5hdGUxLlk7XHJcbmNvbnN0IGRlbHRhWCA9IGNvb3JkaW5hdGUyLlggLSBjb29yZGluYXRlMS5YO1xyXG5yZXR1cm4gZGVsdGFZIC8gZGVsdGFYO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaWRlTm9kZUZvcm1hdHRpbmcoZm9ybWF0dGluZzogc3RyaW5nLHNsb3BlOiBudW1iZXIsYmVmb3JlVG9rZW46IGFueSxhZnRlclRva2VuOiBhbnksbWlkUG9pbnQ6IGFueSkge1xyXG5pZiAoZm9ybWF0dGluZy5tYXRjaCgvKGFib3ZlfGJlbG93fGxlZnR8cmlnaHQpLykpIHtcclxuICAgIHJldHVybiBmb3JtYXR0aW5nO1xyXG59XHJcbmZvcm1hdHRpbmcrPWZvcm1hdHRpbmcubGVuZ3RoPjA/XCIsXCI6XCJcIjtcclxuXHJcbmNvbnN0IGVkZ2UxID0gZmluZFF1YWRyYW50KGJlZm9yZVRva2VuLG1pZFBvaW50KT8udG9TdHJpbmcoKXx8XCJcIjtcclxuY29uc3QgZWRnZTIgPSBmaW5kUXVhZHJhbnQoYWZ0ZXJUb2tlbixtaWRQb2ludCk/LnRvU3RyaW5nKCl8fFwiXCI7XHJcblxyXG5pZiAoc2xvcGUhPT1JbmZpbml0eSYmc2xvcGUhPT0tSW5maW5pdHkpe1xyXG4gICAgaWYgKHNsb3BlICE9PSAwKSB7XHJcbiAgICBmb3JtYXR0aW5nICs9IFwic2xvcGVkLCBcIjtcclxuICAgIH1cclxuICAgIGlmICgvKDN8NCkvLnRlc3QoZWRnZTEpICYmIC8oM3w0KS8udGVzdChlZGdlMikpIHtcclxuICAgIGZvcm1hdHRpbmcgKz0gXCJiZWxvdyBcIjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKC8oMXwyKS8udGVzdChlZGdlMSkgJiYgLygxfDIpLy50ZXN0KGVkZ2UyKSkge1xyXG4gICAgZm9ybWF0dGluZyArPSBcImFib3ZlIFwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5pZiAoc2xvcGUgIT09IDApe1xyXG4gICAgaWYgKC8oMXw0KS8udGVzdChlZGdlMSkgJiYgLygxfDQpLy50ZXN0KGVkZ2UyKSkge1xyXG4gICAgZm9ybWF0dGluZyArPSBcInJpZ2h0XCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKC8oMnwzKS8udGVzdChlZGdlMSkgJiYgLygyfDMpLy50ZXN0KGVkZ2UyKSl7XHJcbiAgICBmb3JtYXR0aW5nICs9IFwibGVmdFwiO1xyXG4gICAgfVxyXG59XHJcbnJldHVybiBmb3JtYXR0aW5nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUZvcm1hdHRpbmcoY29vcmRpbmF0ZTogYW55KXtcclxuaWYgKHR5cGVvZiBjb29yZGluYXRlLmxhYmVsICE9PSBcInN0cmluZ1wiKXsgcmV0dXJuIFwiXCI7IH1cclxuY29uc3QgZm9ybWF0dGluZyA9IGNvb3JkaW5hdGUuZm9ybWF0dGluZz8uc3BsaXQoXCIsXCIpIHx8IFtdO1xyXG5pZiAoZm9ybWF0dGluZy5zb21lKCh2YWx1ZTogYW55KSA9PiAvKGFib3ZlfGJlbG93fGxlZnR8cmlnaHQpLy50ZXN0KHZhbHVlKSkpIHtcclxuICAgIHJldHVybiBjb29yZGluYXRlLmZvcm1hdHRpbmc7XHJcbn1cclxuaWYoZm9ybWF0dGluZy5sZW5ndGg+MCYmIWZvcm1hdHRpbmdbZm9ybWF0dGluZy5sZW5ndGgtMV0uZW5kc1dpdGgoXCIsXCIpKXtmb3JtYXR0aW5nLnB1c2goXCIsXCIpfVxyXG5zd2l0Y2goY29vcmRpbmF0ZS5xdWFkcmFudCl7XHJcbiAgICBjYXNlIDE6XHJcbiAgICBmb3JtYXR0aW5nLnB1c2goXCJhYm92ZSByaWdodCwgXCIpO1xyXG4gICAgYnJlYWs7XHJcbiAgICBjYXNlIDI6XHJcbiAgICBmb3JtYXR0aW5nLnB1c2goXCJhYm92ZSBsZWZ0LCBcIik7XHJcbiAgICBicmVhaztcclxuICAgIGNhc2UgMzpcclxuICAgIGZvcm1hdHRpbmcucHVzaChcImJlbG93IGxlZnQsIFwiKTtcclxuICAgIGJyZWFrO1xyXG4gICAgY2FzZSA0OiBcclxuICAgIGZvcm1hdHRpbmcucHVzaChcImJlbG93IHJpZ2h0LCBcIik7XHJcbiAgICBicmVhaztcclxufVxyXG5yZXR1cm4gZm9ybWF0dGluZy5qb2luKFwiXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjdWxhdGVDaXJjbGUocG9pbnQxOiBhbnksIHBvaW50MjogYW55LCBwb2ludDM6IGFueSkge1xyXG5jb25zdCB4MSA9IHBvaW50MS5YLCB5MSA9IHBvaW50MS5ZO1xyXG5jb25zdCB4MiA9IHBvaW50Mi5YLCB5MiA9IHBvaW50Mi5ZO1xyXG5jb25zdCB4MyA9IHBvaW50My5YLCB5MyA9IHBvaW50My5ZO1xyXG5cclxuLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudHMgbmVlZGVkIGZvciBzb2x2aW5nIHRoZSBzeXN0ZW1cclxuY29uc3QgQSA9IHgxICogKHkyIC0geTMpIC0geTEgKiAoeDIgLSB4MykgKyAoeDIgKiB5MyAtIHkyICogeDMpO1xyXG5jb25zdCBCID0gKHgxICoqIDIgKyB5MSAqKiAyKSAqICh5MyAtIHkyKSArICh4MiAqKiAyICsgeTIgKiogMikgKiAoeTEgLSB5MykgKyAoeDMgKiogMiArIHkzICoqIDIpICogKHkyIC0geTEpO1xyXG5jb25zdCBDID0gKHgxICoqIDIgKyB5MSAqKiAyKSAqICh4MiAtIHgzKSArICh4MiAqKiAyICsgeTIgKiogMikgKiAoeDMgLSB4MSkgKyAoeDMgKiogMiArIHkzICoqIDIpICogKHgxIC0geDIpO1xyXG5jb25zdCBEID0gKHgxICoqIDIgKyB5MSAqKiAyKSAqICh4MyAqIHkyIC0geDIgKiB5MykgKyAoeDIgKiogMiArIHkyICoqIDIpICogKHgxICogeTMgLSB4MyAqIHkxKSArICh4MyAqKiAyICsgeTMgKiogMikgKiAoeDIgKiB5MSAtIHgxICogeTIpO1xyXG5cclxuaWYgKEEgPT09IDApIHtcclxuICAgIHJldHVybiBudWxsOyAvLyBUaGUgcG9pbnRzIGFyZSBjb2xsaW5lYXIsIG5vIHVuaXF1ZSBjaXJjbGVcclxufVxyXG5cclxuLy8gQ2FsY3VsYXRlIHRoZSBjZW50ZXIgKGgsIGspIG9mIHRoZSBjaXJjbGVcclxuY29uc3QgaCA9IC1CIC8gKDIgKiBBKTtcclxuY29uc3QgayA9IC1DIC8gKDIgKiBBKTtcclxuXHJcbi8vIENhbGN1bGF0ZSB0aGUgcmFkaXVzIG9mIHRoZSBjaXJjbGVcclxuY29uc3QgciA9IE1hdGguc3FydCgoQiAqKiAyICsgQyAqKiAyIC0gNCAqIEEgKiBEKSAvICg0ICogQSAqKiAyKSk7XHJcblxyXG5yZXR1cm4ge1xyXG4gICAgY2VudGVyOiB7IFg6IGgsIFk6IGsgfSxcclxuICAgIHJhZGl1czogcixcclxuICAgIGVxdWF0aW9uOiBgKHggLSAke2gudG9GaXhlZCgyKX0pXjIgKyAoeSAtICR7ay50b0ZpeGVkKDIpfSleMiA9ICR7ci50b0ZpeGVkKDIpfV4yYFxyXG59O1xyXG59XHJcbiJdfQ==