import { FormatTikzjax } from "./interpret/tokenizeTikzjax";
export class TikzSvg {
    source;
    tikzjax;
    SVGtikzjax;
    svg;
    debugInfo = "";
    constructor(source) {
        this.source = source;
        this.tikzjax = new FormatTikzjax(this.source);
        this.debugInfo += this.tikzjax.debugInfo;
        this.SVGtikzjax = new TikzjaxTosvg(this.tikzjax);
        this.debugInfo += JSON.stringify(this.SVGtikzjax, null, 1);
        this.setSVGenvironment();
        this.add();
    }
    add() {
        const a = { x1: '0', y1: '0', x2: fromPt(1), y2: fromPt(1), stroke: "white", 'stroke-width': fromPt(0.4) };
        this.svg.appendChild(this.createSVGElement('line', a));
    } //38.87 0.53  1pt=38.87 0.4pt=0.53 // 2pt=75.58 1pt=37.79
    setSVGenvironment() {
        const min = this.tikzjax.getMin();
        const max = this.tikzjax.getMax();
        this.svg = this.createSVGElement('svg', {
            width: fromPt(min.cartesianX + max.cartesianX),
            height: 2 //fromPt(min.cartesianY+max.cartesianY+0.2),
            //preserveAspectRatio: "none",
        });
    }
    getSvg() { return this.svg; }
    createSVGElement(tag, attributes) {
        const element = document.createElementNS("http://www.w3.org/2000/svg", tag);
        for (const [key, value] of Object.entries(attributes)) {
            // Convert numbers to strings before setting attributes
            element.setAttribute(key, String(value));
        }
        return element;
    }
}
class TikzjaxTosvg {
    svgEl;
    constructor(t) {
        const axes = [
            { cartesianX: 0, cartesianY: 0 },
            { cartesianX: 1, cartesianY: 0 }
        ];
        this.svgEl = this.c(axes);
    }
    c(axes) {
        let result = {};
        axes.forEach((axis, index) => {
            result['x' + index] = axis.cartesianX;
            result['y' + index] = axis.cartesianY;
        });
        return result;
    }
}
function convert() {
    const a = { mode: 'draw', formatting: '', coordinates: [
            { cartesianX: 0, cartesianY: 0 }, { cartesianX: 1, cartesianY: 0 }
        ] };
}
function fromPt(pt) {
    return pt * 37.79;
}
function ptToPx(pt) {
    return pt * 1.33;
}
function pxToPt(pt) {
    return pt * 0.75;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXlUaWt6LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Rpa3pqYXgvbXlUaWt6LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUk1RCxNQUFNLE9BQU8sT0FBTztJQUNSLE1BQU0sQ0FBUztJQUNmLE9BQU8sQ0FBZ0I7SUFDdkIsVUFBVSxDQUFNO0lBQ2hCLEdBQUcsQ0FBZ0I7SUFDM0IsU0FBUyxHQUFHLEVBQUUsQ0FBQztJQUNmLFlBQVksTUFBYztRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsU0FBUyxJQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBRXhDLElBQUksQ0FBQyxVQUFVLEdBQUMsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQzlDLElBQUksQ0FBQyxTQUFTLElBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFDLElBQUksRUFBQyxDQUFDLENBQUMsQ0FBQTtRQUV2RCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsR0FBRyxFQUFFLENBQUE7SUFDZCxDQUFDO0lBQ0QsR0FBRztRQUNDLE1BQU0sQ0FBQyxHQUFDLEVBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUMsR0FBRyxFQUFFLEVBQUUsRUFBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLGNBQWMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUMsQ0FBQTtRQUNqRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDekQsQ0FBQyxDQUFBLHlEQUF5RDtJQUVsRCxpQkFBaUI7UUFDckIsTUFBTSxHQUFHLEdBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQyxNQUFNLEdBQUcsR0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRTtZQUNwQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEdBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQztZQUM1QyxNQUFNLEVBQUUsQ0FBQyxDQUFBLDRDQUE0QztZQUNyRCw4QkFBOEI7U0FDakMsQ0FBa0IsQ0FBQztJQUN4QixDQUFDO0lBRUQsTUFBTSxLQUFtQixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFDO0lBRTFDLGdCQUFnQixDQUFDLEdBQVcsRUFBRSxVQUFrQztRQUM1RCxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVFLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUM7WUFDcEQsdURBQXVEO1lBQ3ZELE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzdDLENBQUM7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0NBRUo7QUFFRCxNQUFNLFlBQVk7SUFDZCxLQUFLLENBQUs7SUFDVixZQUFZLENBQU07UUFDZCxNQUFNLElBQUksR0FBQztZQUNQLEVBQUMsVUFBVSxFQUFFLENBQUMsRUFBQyxVQUFVLEVBQUMsQ0FBQyxFQUFRO1lBQ25DLEVBQUMsVUFBVSxFQUFFLENBQUMsRUFBQyxVQUFVLEVBQUMsQ0FBQyxFQUFRO1NBQ3RDLENBQUE7UUFDRCxJQUFJLENBQUMsS0FBSyxHQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDM0IsQ0FBQztJQUlELENBQUMsQ0FBQyxJQUFpQjtRQUNmLElBQUksTUFBTSxHQUEyQixFQUFFLENBQUM7UUFFeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUN6QixNQUFNLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDdEMsTUFBTSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztDQUNKO0FBR0QsU0FBUyxPQUFPO0lBQ1osTUFBTSxDQUFDLEdBQUMsRUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUMsV0FBVyxFQUFFO1lBQzlDLEVBQUMsVUFBVSxFQUFFLENBQUMsRUFBQyxVQUFVLEVBQUUsQ0FBQyxFQUFDLEVBQUMsRUFBQyxVQUFVLEVBQUUsQ0FBQyxFQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUM7U0FDOUQsRUFBQyxDQUFBO0FBQ04sQ0FBQztBQUVELFNBQVMsTUFBTSxDQUFDLEVBQVU7SUFDdEIsT0FBTyxFQUFFLEdBQUMsS0FBSyxDQUFDO0FBQ3BCLENBQUM7QUFFRCxTQUFTLE1BQU0sQ0FBQyxFQUFVO0lBQ3RCLE9BQU8sRUFBRSxHQUFDLElBQUksQ0FBQztBQUNuQixDQUFDO0FBQ0QsU0FBUyxNQUFNLENBQUMsRUFBVTtJQUN0QixPQUFPLEVBQUUsR0FBQyxJQUFJLENBQUM7QUFDbkIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhcnRlc2lhblRvUG9sYXIsIGZpbmRJbnRlcnNlY3Rpb25Qb2ludCwgZmluZFNsb3BlLCBwb2xhclRvQ2FydGVzaWFuLCB0b051bWJlciB9IGZyb20gXCJzcmMvbWF0aFBhcnNlci9tYXRoVXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBBeGlzLCBDb29yZGluYXRlLCBEcmF3LCBUaWt6amF4IH0gZnJvbSBcIi4vdGlrempheFwiO1xuaW1wb3J0IHsgRm9ybWF0VGlrempheCB9IGZyb20gXCIuL2ludGVycHJldC90b2tlbml6ZVRpa3pqYXhcIjtcblxuXG5cbmV4cG9ydCBjbGFzcyBUaWt6U3ZnIHtcbiAgICBwcml2YXRlIHNvdXJjZTogc3RyaW5nO1xuICAgIHByaXZhdGUgdGlrempheDogRm9ybWF0VGlrempheDtcbiAgICBwcml2YXRlIFNWR3Rpa3pqYXg6IGFueTtcbiAgICBwcml2YXRlIHN2ZzogU1ZHU1ZHRWxlbWVudDtcbiAgICBkZWJ1Z0luZm8gPSBcIlwiO1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLnRpa3pqYXggPSBuZXcgRm9ybWF0VGlrempheCh0aGlzLnNvdXJjZSk7XG4gICAgICAgIHRoaXMuZGVidWdJbmZvICs9dGhpcy50aWt6amF4LmRlYnVnSW5mbztcblxuICAgICAgICB0aGlzLlNWR3Rpa3pqYXg9bmV3IFRpa3pqYXhUb3N2Zyh0aGlzLnRpa3pqYXgpXG4gICAgICAgIHRoaXMuZGVidWdJbmZvICs9SlNPTi5zdHJpbmdpZnkodGhpcy5TVkd0aWt6amF4LG51bGwsMSlcblxuICAgICAgICB0aGlzLnNldFNWR2Vudmlyb25tZW50KCk7XG4gICAgICAgIHRoaXMuYWRkKClcbiAgICB9XG4gICAgYWRkKCl7XG4gICAgICAgIGNvbnN0IGE9e3gxOiAnMCcsIHkxOicwJywgeDI6ZnJvbVB0KDEpLCB5Mjpmcm9tUHQoMSksc3Ryb2tlOiBcIndoaXRlXCIsJ3N0cm9rZS13aWR0aCc6IGZyb21QdCgwLjQpfVxuICAgICAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNWR0VsZW1lbnQoJ2xpbmUnLGEpKVxuICAgIH0vLzM4Ljg3IDAuNTMgIDFwdD0zOC44NyAwLjRwdD0wLjUzIC8vIDJwdD03NS41OCAxcHQ9MzcuNzlcblxuICAgIHByaXZhdGUgc2V0U1ZHZW52aXJvbm1lbnQoKSB7XG4gICAgICAgIGNvbnN0IG1pbj10aGlzLnRpa3pqYXguZ2V0TWluKCk7XG4gICAgICAgIGNvbnN0IG1heD10aGlzLnRpa3pqYXguZ2V0TWF4KCk7XG4gICAgICAgIHRoaXMuc3ZnID0gdGhpcy5jcmVhdGVTVkdFbGVtZW50KCdzdmcnLCB7XG4gICAgICAgICAgICB3aWR0aDogZnJvbVB0KG1pbi5jYXJ0ZXNpYW5YK21heC5jYXJ0ZXNpYW5YKSxcbiAgICAgICAgICAgIGhlaWdodDogMi8vZnJvbVB0KG1pbi5jYXJ0ZXNpYW5ZK21heC5jYXJ0ZXNpYW5ZKzAuMiksXG4gICAgICAgICAgICAvL3ByZXNlcnZlQXNwZWN0UmF0aW86IFwibm9uZVwiLFxuICAgICAgICB9KSBhcyBTVkdTVkdFbGVtZW50O1xuICAgIH1cblxuICAgIGdldFN2ZygpOiBTVkdTVkdFbGVtZW50IHtyZXR1cm4gdGhpcy5zdmc7fVxuXG4gICAgY3JlYXRlU1ZHRWxlbWVudCh0YWc6IHN0cmluZywgYXR0cmlidXRlczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSk6IFNWR0VsZW1lbnQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdGFnKTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdzIGJlZm9yZSBzZXR0aW5nIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICAgIFxufVxuXG5jbGFzcyBUaWt6amF4VG9zdmcge1xuICAgIHN2Z0VsOiBhbnlcbiAgICBjb25zdHJ1Y3Rvcih0OiBhbnkpIHtcbiAgICAgICAgY29uc3QgYXhlcz1bXG4gICAgICAgICAgICB7Y2FydGVzaWFuWDogMCxjYXJ0ZXNpYW5ZOjB9YXMgQXhpcyxcbiAgICAgICAgICAgIHtjYXJ0ZXNpYW5YOiAxLGNhcnRlc2lhblk6MH1hcyBBeGlzXG4gICAgICAgIF1cbiAgICAgICAgdGhpcy5zdmdFbD10aGlzLmMoYXhlcylcbiAgICB9XG5cblxuXG4gICAgYyhheGVzOiBBcnJheTxBeGlzPik6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4ge1xuICAgICAgICBsZXQgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgXG4gICAgICAgIGF4ZXMuZm9yRWFjaCgoYXhpcywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJlc3VsdFsneCcgKyBpbmRleF0gPSBheGlzLmNhcnRlc2lhblg7XG4gICAgICAgICAgICByZXN1bHRbJ3knICsgaW5kZXhdID0gYXhpcy5jYXJ0ZXNpYW5ZO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gY29udmVydCgpe1xuICAgIGNvbnN0IGE9e21vZGU6ICdkcmF3Jyxmb3JtYXR0aW5nOiAnJyxjb29yZGluYXRlczogW1xuICAgICAgICB7Y2FydGVzaWFuWDogMCxjYXJ0ZXNpYW5ZOiAwfSx7Y2FydGVzaWFuWDogMSxjYXJ0ZXNpYW5ZOiAwfVxuICAgIF19XG59XG5cbmZ1bmN0aW9uIGZyb21QdChwdDogbnVtYmVyKXtcbiAgICByZXR1cm4gcHQqMzcuNzk7XG59XG5cbmZ1bmN0aW9uIHB0VG9QeChwdDogbnVtYmVyKXtcbiAgICByZXR1cm4gcHQqMS4zMztcbn1cbmZ1bmN0aW9uIHB4VG9QdChwdDogbnVtYmVyKXtcbiAgICByZXR1cm4gcHQqMC43NTtcbn0iXX0=