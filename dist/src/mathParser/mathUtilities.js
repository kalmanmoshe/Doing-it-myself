import settings from "data.json";
export function calculateBinom(n, k, p) {
    return calculateFactorial(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);
}
export function calculateFactorial(n, k) {
    let factoriaN = 1, factoriaK = 1, factoriaNK = 1;
    for (let i = 1; i <= n; i++) {
        factoriaN *= i;
        if (i === k)
            factoriaK = factoriaN;
        if (i === n - k)
            factoriaNK = factoriaN;
    }
    return (factoriaN / (factoriaK * factoriaNK));
}
export function findAngleByCosineRule(side1, side2, oppositeSide) {
    // Law of Cosines: cos(C) = (a^2 + b^2 - c^2) / (2ab)
    const cosAngle = (Math.pow(side1, 2) + Math.pow(side2, 2) - Math.pow(oppositeSide, 2)) / (2 * side1 * side2);
    return radiansToDegrees(Math.acos(cosAngle));
}
export function degreesToRadians(degrees) {
    return degrees * (Math.PI / 180);
}
export function radiansToDegrees(radians) {
    return radians * (180 / Math.PI);
}
export function roundBySettings(input) {
    const number = Number(input);
    return isNaN(number) ? input : Math.round(number * Number(settings.numberFormatting)) / Number(settings.numberFormatting);
}
export function quad(a, b, c, variable) {
    let x1 = (-b + Math.sqrt(Math.pow(b, 2) - 4 * a * c)) / (2 * a);
    let x2 = (-b - Math.sqrt(Math.pow(b, 2) - 4 * a * c)) / (2 * a);
    x1 = roundBySettings(x1);
    x2 = roundBySettings(x2);
    return x1 === x2 ? `${variable} = ${x1}` : `${variable}_1 = ${x1},${variable}_2 = ${x2}`;
}
export function getUsableDegrees(degrees) {
    return ((degrees % 360) + 360) % 360;
}
export const cartesianToPolar = (x, y) => {
    const length = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2)); // Calculate the radius
    const angle = getUsableDegrees(radiansToDegrees(Math.atan2(y, x)));
    return { angle: angle, length: length };
};
function tolerance(number) {
    return Math.abs(number) < 1e-10 ? 0 : number;
}
export const polarToCartesian = (angle, length) => {
    const radians = degreesToRadians(getUsableDegrees(angle));
    return { X: tolerance(length * Math.cos(radians)), Y: tolerance(length * Math.sin(radians)) };
};
export function findIntersectionPoint(coordinate1, coordinate2, slope1, slope2) {
    const xValue = ((slope2 * coordinate2.cartesianX) - (slope1 * coordinate1.cartesianX) + (coordinate1.cartesianY - coordinate2.cartesianY)) / (slope2 - slope1);
    return {
        X: xValue,
        Y: createLineFunction(coordinate1, slope1)(xValue)
    };
}
export function toNumber(input) {
    if (typeof input === 'number')
        return input;
    const parsedNumber = Number(input);
    return isNaN(parsedNumber) ? undefined : parsedNumber;
}
function createLineFunction(coordinate, slope) {
    return function (x) {
        return slope * (x - coordinate.cartesianX) + coordinate.cartesianY;
    };
}
export function findSlope(coordinate1, coordinate2) {
    const deltaY = coordinate2.cartesianY - coordinate1.cartesianY;
    const deltaX = coordinate2.cartesianX - coordinate1.cartesianX;
    return deltaY / deltaX;
}
export function calculateCircle(point1, point2, point3) {
    const x1 = point1.cartesianX, y1 = point1.cartesianY;
    const x2 = point2.cartesianX, y2 = point2.cartesianY;
    const x3 = point3.cartesianX, y3 = point3.cartesianY;
    // Calculate the determinants needed for solving the system
    const A = x1 * (y2 - y3) - y1 * (x2 - x3) + (x2 * y3 - y2 * x3);
    const B = (Math.pow(x1, 2) + Math.pow(y1, 2)) * (y3 - y2) + (Math.pow(x2, 2) + Math.pow(y2, 2)) * (y1 - y3) + (Math.pow(x3, 2) + Math.pow(y3, 2)) * (y2 - y1);
    const C = (Math.pow(x1, 2) + Math.pow(y1, 2)) * (x2 - x3) + (Math.pow(x2, 2) + Math.pow(y2, 2)) * (x3 - x1) + (Math.pow(x3, 2) + Math.pow(y3, 2)) * (x1 - x2);
    const D = (Math.pow(x1, 2) + Math.pow(y1, 2)) * (x3 * y2 - x2 * y3) + (Math.pow(x2, 2) + Math.pow(y2, 2)) * (x1 * y3 - x3 * y1) + (Math.pow(x3, 2) + Math.pow(y3, 2)) * (x2 * y1 - x1 * y2);
    if (A === 0) {
        return null; // The points are collinear, no unique circle
    }
    // Calculate the center (h, k) of the circle
    const h = -B / (2 * A);
    const k = -C / (2 * A);
    // Calculate the radius of the circle
    const r = Math.sqrt((Math.pow(B, 2) + Math.pow(C, 2) - 4 * A * D) / (4 * Math.pow(A, 2)));
    return {
        center: { X: h, Y: k },
        radius: r,
        equation: `(x - ${h.toFixed(2)})^2 + (y - ${k.toFixed(2)})^2 = ${r.toFixed(2)}^2`
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0aFV0aWxpdGllcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tYXRoUGFyc2VyL21hdGhVdGlsaXRpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxRQUFRLE1BQU0sV0FBVyxDQUFDO0FBR2pDLE1BQU0sVUFBVSxjQUFjLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTO0lBQzFELE9BQU8sa0JBQWtCLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDN0UsQ0FBQztBQUVELE1BQU0sVUFBVSxrQkFBa0IsQ0FBQyxDQUFTLEVBQUUsQ0FBUztJQUNuRCxJQUFJLFNBQVMsR0FBRyxDQUFDLEVBQUUsU0FBUyxHQUFHLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQ2pELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUM1QixTQUFTLElBQUksQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUFFLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7WUFBRSxVQUFVLEdBQUcsU0FBUyxDQUFDO0lBQzFDLENBQUM7SUFDRCxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDbEQsQ0FBQztBQUVELE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxLQUFZLEVBQUUsS0FBWSxFQUFFLFlBQW1CO0lBQ2pGLHFEQUFxRDtJQUNyRCxNQUFNLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQzdHLE9BQU8sZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ2pELENBQUM7QUFFRCxNQUFNLFVBQVUsZ0JBQWdCLENBQUMsT0FBZTtJQUM1QyxPQUFPLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUVELE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxPQUFlO0lBQzVDLE9BQU8sT0FBTyxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUUsQ0FBQztBQUN0QyxDQUFDO0FBRUQsTUFBTSxVQUFVLGVBQWUsQ0FBQyxLQUFVO0lBQ3RDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QixPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDOUgsQ0FBQztBQUdELE1BQU0sVUFBVyxJQUFJLENBQUMsQ0FBUyxFQUFDLENBQVMsRUFBQyxDQUFRLEVBQUMsUUFBZTtJQUM5RCxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2hFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDaEUsRUFBRSxHQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN2QixFQUFFLEdBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZCLE9BQU8sRUFBRSxLQUFHLEVBQUUsQ0FBQSxDQUFDLENBQUEsR0FBRyxRQUFRLE1BQU0sRUFBRSxFQUFFLENBQUEsQ0FBQyxDQUFBLEdBQUcsUUFBUSxRQUFRLEVBQUUsSUFBSSxRQUFRLFFBQVEsRUFBRSxFQUFFLENBQUM7QUFDdkYsQ0FBQztBQUdELE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxPQUFlO0lBQzVDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDekMsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxFQUFFO0lBQ3JELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBQSxDQUFDLEVBQUksQ0FBQyxDQUFBLEdBQUcsU0FBQSxDQUFDLEVBQUksQ0FBQyxDQUFBLENBQUMsQ0FBQyxDQUFDLHVCQUF1QjtJQUNsRSxNQUFNLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDO0FBQzVDLENBQUMsQ0FBQztBQUVGLFNBQVMsU0FBUyxDQUFDLE1BQWM7SUFDN0IsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDakQsQ0FBQztBQUdELE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLENBQUMsS0FBYSxFQUFFLE1BQWMsRUFBRSxFQUFFO0lBQzlELE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsT0FBTyxFQUFFLENBQUMsRUFBRSxTQUFTLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNsRyxDQUFDLENBQUM7QUFHRixNQUFNLFVBQVUscUJBQXFCLENBQUMsV0FBaUIsRUFBRSxXQUFpQixFQUFFLE1BQWMsRUFBRSxNQUFjO0lBQ3RHLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLENBQUM7SUFDL0osT0FBTztRQUNILENBQUMsRUFBRSxNQUFNO1FBQ1QsQ0FBQyxFQUFFLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUM7S0FDckQsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNLFVBQVUsUUFBUSxDQUFDLEtBQXNCO0lBQzNDLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUTtRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQzVDLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxPQUFPLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7QUFDMUQsQ0FBQztBQUdELFNBQVMsa0JBQWtCLENBQUMsVUFBZ0IsRUFBRSxLQUFhO0lBQ3ZELE9BQU8sVUFBUyxDQUFTO1FBQ3JCLE9BQU8sS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDO0lBQ3ZFLENBQUMsQ0FBQztBQUNOLENBQUM7QUFHRCxNQUFNLFVBQVUsU0FBUyxDQUFDLFdBQWlCLEVBQUUsV0FBaUI7SUFDMUQsTUFBTSxNQUFNLEdBQUcsV0FBVyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsVUFBVSxDQUFDO0lBQy9ELE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQztJQUMvRCxPQUFPLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDM0IsQ0FBQztBQUdELE1BQU0sVUFBVSxlQUFlLENBQUMsTUFBWSxFQUFFLE1BQVksRUFBRSxNQUFZO0lBQ3BFLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxVQUFVLEVBQUUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFDckQsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLFVBQVUsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztJQUNyRCxNQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsVUFBVSxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO0lBRXJELDJEQUEyRDtJQUMzRCxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDaEUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsR0FBRyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBQSxFQUFFLEVBQUksQ0FBQyxDQUFBLEdBQUcsU0FBQSxFQUFFLEVBQUksQ0FBQyxDQUFBLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQUEsRUFBRSxFQUFJLENBQUMsQ0FBQSxHQUFHLFNBQUEsRUFBRSxFQUFJLENBQUMsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDOUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsR0FBRyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBQSxFQUFFLEVBQUksQ0FBQyxDQUFBLEdBQUcsU0FBQSxFQUFFLEVBQUksQ0FBQyxDQUFBLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQUEsRUFBRSxFQUFJLENBQUMsQ0FBQSxHQUFHLFNBQUEsRUFBRSxFQUFJLENBQUMsQ0FBQSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDOUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsR0FBRyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsR0FBRyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsR0FBRyxTQUFBLEVBQUUsRUFBSSxDQUFDLENBQUEsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFFNUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDVixPQUFPLElBQUksQ0FBQyxDQUFDLDZDQUE2QztJQUM5RCxDQUFDO0lBRUQsNENBQTRDO0lBQzVDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBRXZCLHFDQUFxQztJQUNyQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBQSxDQUFDLEVBQUksQ0FBQyxDQUFBLEdBQUcsU0FBQSxDQUFDLEVBQUksQ0FBQyxDQUFBLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFBLENBQUMsRUFBSSxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUM7SUFFbEUsT0FBTztRQUNILE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtRQUN0QixNQUFNLEVBQUUsQ0FBQztRQUNULFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJO0tBQ3BGLENBQUM7QUFDTixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cCBmcm9tIFwiY29uc3RhbnRzXCI7XHJcbmltcG9ydCBzZXR0aW5ncyBmcm9tIFwiZGF0YS5qc29uXCI7XHJcbmltcG9ydCB7IEF4aXMsIENvb3JkaW5hdGUgfSBmcm9tIFwiLi4vdGlrempheC90aWt6amF4XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlQmlub20objogbnVtYmVyLCBrOiBudW1iZXIsIHA6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gY2FsY3VsYXRlRmFjdG9yaWFsKG4saykgKiBNYXRoLnBvdyhwLCBrKSAqIE1hdGgucG93KDEgLSBwLCBuIC0gayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVGYWN0b3JpYWwobjogbnVtYmVyLCBrOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgbGV0IGZhY3RvcmlhTiA9IDEsIGZhY3RvcmlhSyA9IDEsIGZhY3RvcmlhTksgPSAxO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbjsgaSsrKSB7XHJcbiAgICAgIGZhY3RvcmlhTiAqPSBpO1xyXG4gICAgICBpZiAoaSA9PT0gaykgZmFjdG9yaWFLID0gZmFjdG9yaWFOO1xyXG4gICAgICBpZiAoaSA9PT0gbiAtIGspIGZhY3RvcmlhTksgPSBmYWN0b3JpYU47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKGZhY3RvcmlhTiAvIChmYWN0b3JpYUsgKiBmYWN0b3JpYU5LKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kQW5nbGVCeUNvc2luZVJ1bGUoc2lkZTE6bnVtYmVyLCBzaWRlMjpudW1iZXIsIG9wcG9zaXRlU2lkZTpudW1iZXIpIHtcclxuICAgIC8vIExhdyBvZiBDb3NpbmVzOiBjb3MoQykgPSAoYV4yICsgYl4yIC0gY14yKSAvICgyYWIpXHJcbiAgICBjb25zdCBjb3NBbmdsZSA9IChNYXRoLnBvdyhzaWRlMSwgMikgKyBNYXRoLnBvdyhzaWRlMiwgMikgLSBNYXRoLnBvdyhvcHBvc2l0ZVNpZGUsIDIpKSAvICgyICogc2lkZTEgKiBzaWRlMik7XHJcbiAgICByZXR1cm4gcmFkaWFuc1RvRGVncmVlcyhNYXRoLmFjb3MoY29zQW5nbGUpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXNUb1JhZGlhbnMoZGVncmVlczogbnVtYmVyKXtcclxuICAgIHJldHVybiBkZWdyZWVzICogKE1hdGguUEkgLyAxODApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmFkaWFuc1RvRGVncmVlcyhyYWRpYW5zOiBudW1iZXIpe1xyXG4gICAgcmV0dXJuIHJhZGlhbnMgKiAoMTgwIC8gTWF0aC5QSSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm91bmRCeVNldHRpbmdzKGlucHV0OiBhbnkpOiBudW1iZXIgIHtcclxuICAgIGNvbnN0IG51bWJlciA9IE51bWJlcihpbnB1dCk7XHJcbiAgICByZXR1cm4gaXNOYU4obnVtYmVyKSA/IGlucHV0IDogTWF0aC5yb3VuZChudW1iZXIgKiBOdW1iZXIoc2V0dGluZ3MubnVtYmVyRm9ybWF0dGluZykpIC8gTnVtYmVyKHNldHRpbmdzLm51bWJlckZvcm1hdHRpbmcpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uICBxdWFkKGE6IG51bWJlcixiOiBudW1iZXIsYzpudW1iZXIsdmFyaWFibGU6bnVtYmVyKSB7XHJcbiAgICBsZXQgeDEgPSAoLWIgKyBNYXRoLnNxcnQoTWF0aC5wb3coYiwgMikgLSA0ICogYSAqIGMpKSAvICgyICogYSk7XHJcbiAgICBsZXQgeDIgPSAoLWIgLSBNYXRoLnNxcnQoTWF0aC5wb3coYiwgMikgLSA0ICogYSAqIGMpKSAvICgyICogYSk7XHJcbiAgICB4MT1yb3VuZEJ5U2V0dGluZ3MoeDEpO1xyXG4gICAgeDI9cm91bmRCeVNldHRpbmdzKHgyKTtcclxuICAgIHJldHVybiB4MT09PXgyP2Ake3ZhcmlhYmxlfSA9ICR7eDF9YDpgJHt2YXJpYWJsZX1fMSA9ICR7eDF9LCR7dmFyaWFibGV9XzIgPSAke3gyfWA7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNhYmxlRGVncmVlcyhkZWdyZWVzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuICgoZGVncmVlcyAlIDM2MCkgKyAzNjApICUgMzYwO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2FydGVzaWFuVG9Qb2xhciA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgbGVuZ3RoID0gTWF0aC5zcXJ0KHggKiogMiArIHkgKiogMik7IC8vIENhbGN1bGF0ZSB0aGUgcmFkaXVzXHJcbiAgICBjb25zdCBhbmdsZSA9IGdldFVzYWJsZURlZ3JlZXMocmFkaWFuc1RvRGVncmVlcyhNYXRoLmF0YW4yKHksIHgpKSk7IFxyXG4gICAgcmV0dXJuIHsgYW5nbGU6IGFuZ2xlLCBsZW5ndGg6IGxlbmd0aCB9O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9sZXJhbmNlKG51bWJlcjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMobnVtYmVyKSA8IDFlLTEwID8gMCA6IG51bWJlcjtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBwb2xhclRvQ2FydGVzaWFuID0gKGFuZ2xlOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCByYWRpYW5zID0gZGVncmVlc1RvUmFkaWFucyhnZXRVc2FibGVEZWdyZWVzKGFuZ2xlKSk7XHJcbiAgICByZXR1cm4geyBYOiB0b2xlcmFuY2UobGVuZ3RoICogTWF0aC5jb3MocmFkaWFucykpLCBZOiB0b2xlcmFuY2UobGVuZ3RoICogTWF0aC5zaW4ocmFkaWFucykpIH07XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbnRlcnNlY3Rpb25Qb2ludChjb29yZGluYXRlMTogQXhpcywgY29vcmRpbmF0ZTI6IEF4aXMsIHNsb3BlMTogbnVtYmVyLCBzbG9wZTI6IG51bWJlcikge1xyXG4gICAgY29uc3QgeFZhbHVlID0gKChzbG9wZTIgKiBjb29yZGluYXRlMi5jYXJ0ZXNpYW5YKSAtIChzbG9wZTEgKiBjb29yZGluYXRlMS5jYXJ0ZXNpYW5YKSArIChjb29yZGluYXRlMS5jYXJ0ZXNpYW5ZIC0gY29vcmRpbmF0ZTIuY2FydGVzaWFuWSkpIC8gKHNsb3BlMiAtIHNsb3BlMSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFg6IHhWYWx1ZSwgXHJcbiAgICAgICAgWTogY3JlYXRlTGluZUZ1bmN0aW9uKGNvb3JkaW5hdGUxLCBzbG9wZTEpKHhWYWx1ZSlcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b051bWJlcihpbnB1dDogc3RyaW5nIHwgbnVtYmVyKTogbnVtYmVyfHVuZGVmaW5lZCB7XHJcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJykgcmV0dXJuIGlucHV0O1xyXG4gICAgY29uc3QgcGFyc2VkTnVtYmVyID0gTnVtYmVyKGlucHV0KTtcclxuICAgIHJldHVybiBpc05hTihwYXJzZWROdW1iZXIpID8gdW5kZWZpbmVkIDogcGFyc2VkTnVtYmVyO1xyXG59XHJcbiAgXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMaW5lRnVuY3Rpb24oY29vcmRpbmF0ZTogQXhpcywgc2xvcGU6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHg6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBzbG9wZSAqICh4IC0gY29vcmRpbmF0ZS5jYXJ0ZXNpYW5YKSArIGNvb3JkaW5hdGUuY2FydGVzaWFuWTtcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZFNsb3BlKGNvb3JkaW5hdGUxOiBBeGlzLCBjb29yZGluYXRlMjogQXhpcykge1xyXG4gICAgY29uc3QgZGVsdGFZID0gY29vcmRpbmF0ZTIuY2FydGVzaWFuWSAtIGNvb3JkaW5hdGUxLmNhcnRlc2lhblk7XHJcbiAgICBjb25zdCBkZWx0YVggPSBjb29yZGluYXRlMi5jYXJ0ZXNpYW5YIC0gY29vcmRpbmF0ZTEuY2FydGVzaWFuWDtcclxuICAgIHJldHVybiBkZWx0YVkgLyBkZWx0YVg7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlQ2lyY2xlKHBvaW50MTogQXhpcywgcG9pbnQyOiBBeGlzLCBwb2ludDM6IEF4aXMpIHtcclxuICAgIGNvbnN0IHgxID0gcG9pbnQxLmNhcnRlc2lhblgsIHkxID0gcG9pbnQxLmNhcnRlc2lhblk7XHJcbiAgICBjb25zdCB4MiA9IHBvaW50Mi5jYXJ0ZXNpYW5YLCB5MiA9IHBvaW50Mi5jYXJ0ZXNpYW5ZO1xyXG4gICAgY29uc3QgeDMgPSBwb2ludDMuY2FydGVzaWFuWCwgeTMgPSBwb2ludDMuY2FydGVzaWFuWTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50cyBuZWVkZWQgZm9yIHNvbHZpbmcgdGhlIHN5c3RlbVxyXG4gICAgY29uc3QgQSA9IHgxICogKHkyIC0geTMpIC0geTEgKiAoeDIgLSB4MykgKyAoeDIgKiB5MyAtIHkyICogeDMpO1xyXG4gICAgY29uc3QgQiA9ICh4MSAqKiAyICsgeTEgKiogMikgKiAoeTMgLSB5MikgKyAoeDIgKiogMiArIHkyICoqIDIpICogKHkxIC0geTMpICsgKHgzICoqIDIgKyB5MyAqKiAyKSAqICh5MiAtIHkxKTtcclxuICAgIGNvbnN0IEMgPSAoeDEgKiogMiArIHkxICoqIDIpICogKHgyIC0geDMpICsgKHgyICoqIDIgKyB5MiAqKiAyKSAqICh4MyAtIHgxKSArICh4MyAqKiAyICsgeTMgKiogMikgKiAoeDEgLSB4Mik7XHJcbiAgICBjb25zdCBEID0gKHgxICoqIDIgKyB5MSAqKiAyKSAqICh4MyAqIHkyIC0geDIgKiB5MykgKyAoeDIgKiogMiArIHkyICoqIDIpICogKHgxICogeTMgLSB4MyAqIHkxKSArICh4MyAqKiAyICsgeTMgKiogMikgKiAoeDIgKiB5MSAtIHgxICogeTIpO1xyXG5cclxuICAgIGlmIChBID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIFRoZSBwb2ludHMgYXJlIGNvbGxpbmVhciwgbm8gdW5pcXVlIGNpcmNsZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgY2VudGVyIChoLCBrKSBvZiB0aGUgY2lyY2xlXHJcbiAgICBjb25zdCBoID0gLUIgLyAoMiAqIEEpO1xyXG4gICAgY29uc3QgayA9IC1DIC8gKDIgKiBBKTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXHJcbiAgICBjb25zdCByID0gTWF0aC5zcXJ0KChCICoqIDIgKyBDICoqIDIgLSA0ICogQSAqIEQpIC8gKDQgKiBBICoqIDIpKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNlbnRlcjogeyBYOiBoLCBZOiBrIH0sXHJcbiAgICAgICAgcmFkaXVzOiByLFxyXG4gICAgICAgIGVxdWF0aW9uOiBgKHggLSAke2gudG9GaXhlZCgyKX0pXjIgKyAoeSAtICR7ay50b0ZpeGVkKDIpfSleMiA9ICR7ci50b0ZpeGVkKDIpfV4yYFxyXG4gICAgfTtcclxufSJdfQ==