\pgfooclass{stringMass}{
	\attribute angle;
	\attribute length=2;
	\attribute origin=0,0;
	\attribute anchor;
	\attribute opacity;
	\attribute maseSize=10pt;

    \method stringMass(#1,#2) {
		\pgfooset{angle}{#1}
		\pgfooset{opacity}{#2}
		\pgfoothis.set proportions()
		\pgfoothis.draw()
	}
	\method set proportions(){
		\coor{-90+\pgfoovalueof{angle}:\pgfoovalueof{length}}{A}{}{}
		\pgfooset{anchor}{A}
	}
	\method draw(){
		\draw [brown,line width=1pt,opacity=\pgfoovalueof{opacity}] (\pgfoovalueof{origin})--(\pgfoovalueof{anchor});
		\begin{scope}[rotate=\pgfoovalueof{angle},opacity=\pgfoovalueof{opacity}]
			\def\size{\pgfoovalueof{maseSize}}
			\filldraw[brown, rounded corners=8pt] ([shift={(-\size,-\size)}]\pgfoovalueof{anchor}) rectangle ++(\size*2,\size*2);
			\filldraw [green] (\pgfoovalueof{anchor})circle (2pt);
		\end{scope}
	}
	\method addCeiling(#1,#2) {
		\draw [#2] (${\pgfoovalueof{origin}}-{0.5*#1,0}$)rectangle+(#1,0.5);
	}
	\method direction(#1,#2){
		\draw [dotted,line width=1pt,] (\pgfoovalueof{anchor})--+(#1:\pgfoovalueof{maseSize}*2)coordinate(head);
		\draw [line width=1pt,latex-] (head)--+(#1-90:\pgfoovalueof{maseSize})node [pos=-0.7]{#2};
	}
	\method outerLabel(#1,#2,#3){
		\def\extra{0}
  \def\temp{#3}
  \ifx\temp\empty
    % #3 is empty, do nothing (extra remains 0)
  \else
    \def\extra{#3}
  \fi
  \gettextheight{height}{#2}
	    \message{height is \the\height and \extra}
			\path [] (\pgfoovalueof{anchor})--+(#1:\pgfoovalueof{maseSize}+\height+\extra)node [] {${#2}$};
	}
}