{"version":3,"file":"has-parbreak-DuSi3V4y.js","sources":["../utils/has-parbreak.ts"],"sourcesContent":["import * as Ast from \"@unified-latex/unified-latex-types\";\nimport { match } from \"@unified-latex/unified-latex-util-match\";\n\n/**\n * Returns whether there is a parbreak in `nodes` (either a parsed parbreak,\n * or the macro `\\par`)\n */\nexport function hasParbreak(nodes: Ast.Node[]) {\n    return nodes.some(\n        (node) => match.parbreak(node) || match.macro(node, \"par\")\n    );\n}\n\n/**\n * Is there a parbreak or a macro/environment that acts like a parbreak (e.g. \\section{...})\n * in the array?\n */\nexport function hasBreakingNode(\n    nodes: Ast.Node[],\n    options?: {\n        macrosThatBreakPars?: string[];\n        environmentsThatDontBreakPars?: string[];\n    }\n): boolean {\n    if (hasParbreak(nodes)) {\n        return true;\n    }\n\n    const {\n        macrosThatBreakPars = [\n            \"part\",\n            \"chapter\",\n            \"section\",\n            \"subsection\",\n            \"subsubsection\",\n            \"vspace\",\n            \"smallskip\",\n            \"medskip\",\n            \"bigskip\",\n            \"hfill\",\n        ],\n        environmentsThatDontBreakPars = [],\n    } = options || {};\n\n    const macroMatcher = match.createMacroMatcher(macrosThatBreakPars);\n    const envMatcher = match.createEnvironmentMatcher(\n        environmentsThatDontBreakPars\n    );\n\n    return nodes.some(\n        (node) =>\n            macroMatcher(node) ||\n            (match.anyEnvironment(node) && !envMatcher(node))\n    );\n}\n"],"names":[],"mappings":";AAOO,SAAS,YAAY,OAAmB;AAC3C,SAAO,MAAM;AAAA,IACT,CAAC,SAAS,MAAM,SAAS,IAAI,KAAK,MAAM,MAAM,MAAM,KAAK;AAAA,EAAA;AAEjE;AAMgB,SAAA,gBACZ,OACA,SAIO;AACH,MAAA,YAAY,KAAK,GAAG;AACb,WAAA;AAAA,EACX;AAEM,QAAA;AAAA,IACF,sBAAsB;AAAA,MAClB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAAA,IACA,gCAAgC,CAAC;AAAA,EACrC,IAAe;AAET,QAAA,eAAe,MAAM,mBAAmB,mBAAmB;AACjE,QAAM,aAAa,MAAM;AAAA,IACrB;AAAA,EAAA;AAGJ,SAAO,MAAM;AAAA,IACT,CAAC,SACG,aAAa,IAAI,KAChB,MAAM,eAAe,IAAI,KAAK,CAAC,WAAW,IAAI;AAAA,EAAA;AAE3D;"}